/**
 * Copyright Â© INOVUA TRADING.
 *
 * This source code is licensed under the Commercial License found in the
 * LICENSE file in the root directory of this source tree.
 */
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var dropGroupIndexValidation = function dropGroupIndexValidation(_ref) {
  var data = _ref.data,
      dragIndex = _ref.dragIndex,
      dropIndex = _ref.dropIndex,
      isRowReorderValid = _ref.isRowReorderValid,
      selectedGroup = _ref.selectedGroup,
      allowRowReoderBetweenGroups = _ref.allowRowReoderBetweenGroups;
  var iterateRows = false;
  var validDropPositions = data.reduce(function (acc, curr, i) {
    if (curr.__group) {
      var value = curr.keyPath.join('/');

      if (!value.localeCompare(selectedGroup)) {
        iterateRows = true;
      } else {
        if (!allowRowReoderBetweenGroups) {
          iterateRows = false;
        }
      }
    }

    if (allowRowReoderBetweenGroups) {
      iterateRows = true;
    }

    if (!curr.__group && iterateRows) {
      acc[i] = true;
    } else {
      acc[i] = false;
    }

    return acc;
  }, {});

  if (!data[data.length - 1].__group) {
    validDropPositions[data.length] = true;
  }

  if (isRowReorderValid) {
    validDropPositions[dropIndex] = isRowReorderValid({
      dragRowIndex: dragIndex,
      dropRowIndex: dropIndex
    });
  }

  return validDropPositions;
};

var _default = dropGroupIndexValidation;
exports.default = _default;