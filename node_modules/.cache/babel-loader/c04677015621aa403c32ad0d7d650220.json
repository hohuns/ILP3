{"ast":null,"code":"/** \n * Copyright Â© INOVUA TRADING.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _typeof = require(\"@babel/runtime/helpers/typeof\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _reactClass = _interopRequireDefault(require(\"../../../packages/react-class\"));\n\nvar _debounce = _interopRequireDefault(require(\"../../../packages/debounce\"));\n\nvar _contains = _interopRequireDefault(require(\"../../../packages/contains\"));\n\nvar _assignDefined2 = _interopRequireDefault(require(\"../../../packages/assign-defined\"));\n\nvar _region = _interopRequireDefault(require(\"../../../packages/region\"));\n\nvar _isMobile = _interopRequireDefault(require(\"../../../packages/isMobile\"));\n\nvar _getRangesForBoxes = _interopRequireDefault(require(\"./getRangesForBoxes\"));\n\nvar _getRangesForColumns = _interopRequireDefault(require(\"./getRangesForColumns\"));\n\nvar _setupColumnDrag = _interopRequireDefault(require(\"./setupColumnDrag\"));\n\nvar _moveXBeforeY = _interopRequireDefault(require(\"../../../utils/moveXBeforeY\"));\n\nvar _isFocusable = _interopRequireDefault(require(\"../../../utils/isFocusable\"));\n\nvar _getDropIndex2 = _interopRequireDefault(require(\"./getDropIndex\"));\n\nvar _getUndraggableSuccessiveCount = _interopRequireDefault(require(\"./getUndraggableSuccessiveCount\"));\n\nvar _DragCell = _interopRequireWildcard(require(\"./DragCell\"));\n\nvar _DragHeaderGroup = _interopRequireDefault(require(\"./DragHeaderGroup\"));\n\nvar _HeaderWrapper = _interopRequireDefault(require(\"./HeaderWrapper\"));\n\nvar _Header = require(\"./Header\");\n\nvar _getScrollbarWidth = _interopRequireDefault(require(\"../../../packages/getScrollbarWidth\"));\n\nvar _getGlobal = require(\"../../../getGlobal\");\n\nfunction _getRequireWildcardCache(nodeInterop) {\n  if (typeof WeakMap !== \"function\") return null;\n  var cacheBabelInterop = new WeakMap();\n  var cacheNodeInterop = new WeakMap();\n  return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) {\n    return nodeInterop ? cacheNodeInterop : cacheBabelInterop;\n  })(nodeInterop);\n}\n\nfunction _interopRequireWildcard(obj, nodeInterop) {\n  if (!nodeInterop && obj && obj.__esModule) {\n    return obj;\n  }\n\n  if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") {\n    return {\n      default: obj\n    };\n  }\n\n  var cache = _getRequireWildcardCache(nodeInterop);\n\n  if (cache && cache.has(obj)) {\n    return cache.get(obj);\n  }\n\n  var newObj = {};\n  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n\n  for (var key in obj) {\n    if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) {\n      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n\n      if (desc && (desc.get || desc.set)) {\n        Object.defineProperty(newObj, key, desc);\n      } else {\n        newObj[key] = obj[key];\n      }\n    }\n  }\n\n  newObj.default = obj;\n\n  if (cache) {\n    cache.set(obj, newObj);\n  }\n\n  return newObj;\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      (0, _defineProperty2.default)(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n\n  return target;\n}\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function _createSuperInternal() {\n    var Super = (0, _getPrototypeOf2.default)(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = (0, _getPrototypeOf2.default)(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return (0, _possibleConstructorReturn2.default)(this, result);\n  };\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nvar globalObject = (0, _getGlobal.getGlobal)();\nvar SCROLL_MARGIN = 40;\nvar DRAG_INFO = null;\n\nvar preventDefault = function preventDefault(e) {\n  return e.preventDefault();\n};\n\nvar getColumnOrder = function getColumnOrder(props, filter) {\n  var doFilter = function doFilter(c) {\n    return !c.groupColumn && filter ? filter(c) : true;\n  };\n\n  var order;\n\n  if (props.computedColumnOrder) {\n    order = props.computedColumnOrder.map(function (id) {\n      return props.columnsMap[id];\n    });\n  } else {\n    order = props.allColumns;\n  }\n\n  var toId = function toId(c) {\n    return c.id;\n  };\n\n  order = (order || []).filter(doFilter).map(toId);\n  var lockedStart = props.lockedStartColumns.filter(doFilter).map(toId);\n  var lockedMap = lockedStart.reduce(function (acc, cId) {\n    acc[cId] = true;\n    return acc;\n  }, {});\n  var lockedEnd = props.lockedEndColumns.filter(doFilter).map(toId);\n  lockedEnd.reduce(function (acc, cId) {\n    acc[cId] = true;\n    return acc;\n  }, lockedMap);\n  return [].concat((0, _toConsumableArray2.default)(lockedStart), (0, _toConsumableArray2.default)(order.filter(function (cId) {\n    return !lockedMap[cId];\n  })), (0, _toConsumableArray2.default)(lockedEnd));\n};\n\nvar getParentsForColumns = function getParentsForColumns(columns, groups, maxDepth) {\n  var parentsForColumns = columns.map(function (col) {\n    var result = [col.id].concat((0, _toConsumableArray2.default)((0, _Header.getParentGroups)(col.group, groups, {\n      includeSelf: true\n    }).map(function (g) {\n      return g.name;\n    })));\n\n    while (result.length <= maxDepth + 1) {\n      result.splice(0, 0, result[0]);\n    }\n\n    return result;\n  });\n  return parentsForColumns;\n};\n\nvar getValidDropPositions = function getValidDropPositions(_ref) {\n  var dragTargetDepth = _ref.dragTargetDepth,\n      dragTargetIndex = _ref.dragTargetIndex,\n      dragTargetLength = _ref.dragTargetLength,\n      parentsForColumns = _ref.parentsForColumns,\n      columns = _ref.columns,\n      allowGroupSplitOnReorder = _ref.allowGroupSplitOnReorder;\n\n  var getGroupsForColumn = function getGroupsForColumn(parents) {\n    parents = parents || [];\n    var initialName = parents[0];\n    var shouldCheck = true;\n    var groups = [];\n    parents.forEach(function (group) {\n      if (!shouldCheck) {\n        groups.push(group);\n        return;\n      }\n\n      if (shouldCheck && group !== initialName) {\n        shouldCheck = false;\n        groups.push(group);\n        return;\n      }\n\n      groups.push(null);\n    });\n    return groups;\n  };\n\n  var getGroupStartFor = function getGroupStartFor(parents, depth, index) {\n    var initialParent = parents[index].slice(-depth - 1)[0];\n    var itParents;\n    var currentParent;\n\n    do {\n      itParents = parents[index - 1];\n\n      if (!itParents) {\n        break;\n      }\n\n      currentParent = itParents.slice(-depth - 1)[0];\n\n      if (currentParent !== initialParent) {\n        break;\n      }\n\n      index--;\n    } while (index >= 0);\n\n    return index;\n  };\n\n  var getGroupEndFor = function getGroupEndFor(parents, depth, index) {\n    var initialParent = parents[index].slice(-depth - 1)[0];\n    var itParents;\n    var currentParent;\n\n    do {\n      index++;\n      itParents = parents[index];\n\n      if (!itParents) {\n        break;\n      }\n\n      currentParent = itParents.slice(-depth - 1)[0];\n\n      if (currentParent !== initialParent) {\n        break;\n      }\n    } while (index < parents.length);\n\n    return index;\n  };\n\n  var res = columns.reduce(function (acc, col, index) {\n    if (index > dragTargetIndex && index <= dragTargetIndex + dragTargetLength) {\n      return acc;\n    }\n\n    acc[index] = true;\n    return acc;\n  }, {});\n  res[columns.length] = true;\n\n  if (!allowGroupSplitOnReorder) {\n    var dragTargetParentGroups = getGroupsForColumn(parentsForColumns[dragTargetIndex]).filter(function (x) {\n      return x;\n    });\n    var isSingleColumn = !dragTargetParentGroups.length;\n    var usedDepth = isSingleColumn ? 0 : dragTargetDepth;\n    var parentGroupStartIndex = !usedDepth ? 0 : getGroupStartFor(parentsForColumns, usedDepth - 1, dragTargetIndex);\n    var parentGroupEndIndex = !usedDepth ? columns.length : getGroupEndFor(parentsForColumns, usedDepth - 1, dragTargetIndex);\n    var currentGroupEndIndex = getGroupEndFor(parentsForColumns, usedDepth, dragTargetIndex);\n\n    for (var i = 0; i <= columns.length; i++) {\n      delete res[i];\n    }\n\n    for (var _i = parentGroupStartIndex; _i < parentGroupEndIndex; _i++) {\n      var itGroupStartIndex = getGroupStartFor(parentsForColumns, usedDepth, _i);\n      var itGroupEndIndex = getGroupEndFor(parentsForColumns, usedDepth, _i);\n      res[itGroupStartIndex] = true;\n      res[itGroupEndIndex] = true;\n    }\n\n    var groupEndIsLastUnlocked = columns[currentGroupEndIndex] && columns[currentGroupEndIndex].computedLocked === 'end' && columns[currentGroupEndIndex - 1] && columns[currentGroupEndIndex - 1].computedLocked !== 'end';\n\n    if (!groupEndIsLastUnlocked) {\n      delete res[currentGroupEndIndex];\n    }\n  }\n\n  return res;\n};\n\nvar ReorderArrow = function (_React$Component) {\n  (0, _inherits2.default)(ReorderArrow, _React$Component);\n\n  var _super = _createSuper(ReorderArrow);\n\n  function ReorderArrow(props) {\n    var _this;\n\n    (0, _classCallCheck2.default)(this, ReorderArrow);\n    _this = _super.call(this, props);\n    _this.state = {\n      visible: false,\n      bottom: 0,\n      top: 0,\n      left: 0\n    };\n    return _this;\n  }\n\n  (0, _createClass2.default)(ReorderArrow, [{\n    key: \"set\",\n    value: function set(_ref2) {\n      var bottom = _ref2.bottom,\n          top = _ref2.top,\n          left = _ref2.left,\n          right = _ref2.right,\n          target = _ref2.target;\n      this.setState({\n        target: target,\n        bottom: bottom,\n        left: left,\n        top: top,\n        right: right\n      });\n    }\n  }, {\n    key: \"setVisible\",\n    value: function setVisible(visible) {\n      if (visible != this.state.visible) {\n        this.setState({\n          visible: visible\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var size = this.props.size;\n      var _this$state = this.state,\n          bottom = _this$state.bottom,\n          top = _this$state.top,\n          left = _this$state.left,\n          right = _this$state.right,\n          visible = _this$state.visible,\n          target = _this$state.target;\n      return _react.default.createElement(\"div\", {\n        ref: this.refReorderArrow,\n        style: {\n          position: 'absolute',\n          top: top,\n          left: left,\n          right: right,\n          width: size,\n          height: bottom - top,\n          bottom: bottom,\n          pointerEvents: 'none',\n          opacity: visible ? 1 : 0,\n          display: 'block'\n        },\n        className: \"InovuaReactDataGrid__column-reorder-arrow InovuaReactDataGrid__column-reorder-arrow--direction-\".concat(this.props.rtl ? 'rtl' : 'ltr')\n      }, _react.default.createElement(\"div\", {\n        className: \"InovuaReactDataGrid__column-reorder-arrow-fill InovuaReactDataGrid__column-reorder-arrow-fill--direction-\".concat(this.props.rtl ? 'rtl' : 'ltr', \" InovuaReactDataGrid__column-reorder-arrow-fill--target-\").concat(target || 'none')\n      }), this.props.renderReorderIndicator());\n    }\n  }]);\n  return ReorderArrow;\n}(_react.default.Component);\n\nReorderArrow.defaultProps = {\n  renderReorderIndicator: function renderReorderIndicator() {}\n};\n\nvar InovuaDataGridHeaderLayout = function (_Component) {\n  (0, _inherits2.default)(InovuaDataGridHeaderLayout, _Component);\n\n  var _super2 = _createSuper(InovuaDataGridHeaderLayout);\n\n  function InovuaDataGridHeaderLayout(props) {\n    var _this2;\n\n    (0, _classCallCheck2.default)(this, InovuaDataGridHeaderLayout);\n    _this2 = _super2.call(this, props);\n    _this2.state = {\n      draggingProps: null\n    };\n\n    _this2.refDragGroupItem = function (item) {\n      _this2.dragGroupItem = item;\n    };\n\n    _this2.refDragCell = function (cell) {\n      _this2.dragCell = cell;\n    };\n\n    _this2.refDragHeaderGroup = function (item) {\n      _this2.dragHeaderGroup = item;\n    };\n\n    _this2.groupToolbar = (0, _react.createRef)();\n\n    _this2.refHeader = function (h) {\n      _this2.headerNode = null;\n\n      if (h) {\n        _this2.headerNode = h.getDOMNode ? h.getDOMNode() : null;\n\n        if (!_this2.headerNode) {\n          throw 'Cannot find header node';\n        }\n\n        if (_isMobile.default) {\n          _this2.headerNode.addEventListener('touchmove', preventDefault);\n        }\n      } else {\n        if (_this2.headerNode && _isMobile.default) {\n          _this2.headerNode.removeEventListener('touchmove', preventDefault);\n        }\n\n        _this2.headerNode = null;\n      }\n\n      _this2.header = h;\n    };\n\n    _this2.headerWrapper = (0, _react.createRef)();\n\n    _this2.refReorderArrow = function (cmp) {\n      _this2.reorderArrow = cmp;\n    };\n\n    _this2.headerDomNode = (0, _react.createRef)();\n    _this2.lazyNotifyHeaderScrollLeftMax = (0, _debounce.default)(_this2.notifyHeaderScrollLeftMax, 150);\n    return _this2;\n  }\n\n  (0, _createClass2.default)(InovuaDataGridHeaderLayout, [{\n    key: \"notifyHeaderScrollLeftMax\",\n    value: function notifyHeaderScrollLeftMax(scrollLeftMax) {\n      if (this.header && this.props.lockedEndColumns) {\n        this.header.notifyScrollLeftMax(scrollLeftMax === undefined ? this.getScrollLeftMax() : scrollLeftMax);\n      }\n    }\n  }, {\n    key: \"onContainerScrollHorizontal\",\n    value: function onContainerScrollHorizontal(scrollLeft, scrollLeftMax) {\n      this.scrollLeft = scrollLeft;\n\n      if (this.header) {\n        this.header.setScrollLeft(scrollLeft, scrollLeftMax);\n        this.lazyNotifyHeaderScrollLeftMax();\n      }\n    }\n  }, {\n    key: \"setScrollLeft\",\n    value: function setScrollLeft(scrollLeft) {\n      this.props.setScrollLeft(scrollLeft);\n    }\n  }, {\n    key: \"getScrollLeft\",\n    value: function getScrollLeft() {\n      return this.scrollLeft || 0;\n    }\n  }, {\n    key: \"getScrollLeftMax\",\n    value: function getScrollLeftMax() {\n      return this.props.getScrollLeftMax();\n    }\n  }, {\n    key: \"setColumnRenderStartIndex\",\n    value: function setColumnRenderStartIndex(columnRenderStartIndex) {\n      if (this.header) {\n        this.header.setColumnRenderStartIndex(columnRenderStartIndex);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return _react.default.createElement(\"div\", {\n        ref: this.headerDomNode,\n        className: 'InovuaReactDataGrid__header-layout'\n      }, this.renderGroupToolbar(), this.renderHeaderWrapper(), this.renderDragCell(), this.renderDragGroupItem(), this.renderDragHeaderGroup(), this.renderReorderIndicator());\n    }\n  }, {\n    key: \"renderGroupToolbar\",\n    value: function renderGroupToolbar() {\n      var _this$props = this.props,\n          columnsMap = _this$props.columnsMap,\n          onGroupByChange = _this$props.onGroupByChange,\n          onHeaderSortClick = _this$props.onHeaderSortClick,\n          renderGroupItem = _this$props.renderGroupItem,\n          renderSortTool = _this$props.renderSortTool,\n          renderGroupToolbar = _this$props.renderGroupToolbar,\n          groupBy = _this$props.computedGroupBy,\n          disableGroupByToolbar = _this$props.disableGroupByToolbar,\n          i18n = _this$props.i18n,\n          rtl = _this$props.rtl,\n          theme = _this$props.theme;\n\n      if (!groupBy || !renderGroupToolbar) {\n        return null;\n      }\n\n      return renderGroupToolbar({\n        columnsMap: columnsMap,\n        groupBy: groupBy,\n        rtl: rtl,\n        theme: theme,\n        renderSortTool: renderSortTool,\n        onGroupByChange: onGroupByChange,\n        disableGroupByToolbar: disableGroupByToolbar,\n        renderGroupItem: renderGroupItem,\n        headerGroupPlaceholderText: i18n('dragHeaderToGroup'),\n        onItemMouseDown: this.onGroupItemMouseDown,\n        onSortClick: onHeaderSortClick,\n        ref: this.groupToolbar\n      });\n    }\n  }, {\n    key: \"renderHeaderWrapper\",\n    value: function renderHeaderWrapper() {\n      var props = this.props;\n      var computedShowHeader = props.computedShowHeader;\n\n      if (!computedShowHeader) {\n        return null;\n      }\n\n      var scrollLeft = (this.scrollLeft !== undefined ? this.scrollLeft : props.scrollLeft) || 0;\n      var groupBy = this.props.computedGroupBy && this.props.computedGroupBy.length ? this.props.computedGroupBy : null;\n      return _react.default.createElement(_HeaderWrapper.default, _objectSpread(_objectSpread({}, props), {}, {\n        groupBy: groupBy,\n        onHeaderGroupMouseDown: this.onHeaderGroupMouseDown,\n        onHeaderCellMouseDown: this.onHeaderCellMouseDown,\n        onHeaderCellTouchStart: this.onHeaderCellTouchStart,\n        ref: this.headerWrapper,\n        refHeader: this.refHeader,\n        scrollLeft: scrollLeft,\n        setScrollLeft: this.setScrollLeft\n      }));\n    }\n  }, {\n    key: \"renderDragCell\",\n    value: function renderDragCell() {\n      return _react.default.createElement(_DragCell.default, {\n        ref: this.refDragCell\n      });\n    }\n  }, {\n    key: \"renderDragGroupItem\",\n    value: function renderDragGroupItem() {\n      if (!this.props.renderDragGroupItem) {\n        return null;\n      }\n\n      return this.props.renderDragGroupItem(this.refDragGroupItem);\n    }\n  }, {\n    key: \"renderDragHeaderGroup\",\n    value: function renderDragHeaderGroup() {\n      if (!this.props.computedGroups) {\n        return;\n      }\n\n      return _react.default.createElement(_DragHeaderGroup.default, {\n        ref: this.refDragHeaderGroup\n      });\n    }\n  }, {\n    key: \"onGroupItemMouseDown\",\n    value: function onGroupItemMouseDown(column, index, event) {\n      this.onHeaderCellMouseDown(column, event, {\n        dragTarget: 'group',\n        dragIndex: index\n      });\n    }\n  }, {\n    key: \"getCellDOMNodeAt\",\n    value: function getCellDOMNodeAt(index) {\n      return this.header.getCellDOMNodeAt(index);\n    }\n  }, {\n    key: \"getHeader\",\n    value: function getHeader() {\n      return this.header;\n    }\n  }, {\n    key: \"onHeaderGroupMouseDown\",\n    value: function onHeaderGroupMouseDown(event, headerGroupProps, headerGroup) {\n      if (event.ctrlKey || event.metaKey) {\n        return;\n      }\n\n      if (this._dragIndex !== undefined) {\n        return;\n      }\n\n      if (headerGroupProps.group && headerGroupProps.group.draggable === false) {\n        return;\n      }\n\n      var dragTargetNode = headerGroup.domRef ? headerGroup.domRef.current : null;\n      var shouldStop = (0, _toConsumableArray2.default)(dragTargetNode.querySelectorAll('.InovuaReactDataGrid__column-header__filter-wrapper')).reduce(function (shouldStop, filterWrapperNode) {\n        if ((0, _contains.default)(filterWrapperNode, event.target) || filterWrapperNode === event.target) {\n          return true;\n        }\n\n        return shouldStop;\n      }, false);\n\n      if (shouldStop) {\n        return;\n      }\n\n      var groupColumns = headerGroupProps.columns.reduce(function (acc, colId) {\n        acc[colId] = true;\n        return acc;\n      }, {});\n      this.groupColumns = groupColumns;\n      var dragBoxes = this.header.getGroupsAndCells().filter(function (item) {\n        if (item === headerGroup) {\n          return true;\n        }\n\n        if (item.props.id in groupColumns) {\n          return false;\n        }\n\n        return !item.props.isHeaderGroup;\n      });\n      var dragIndex = dragBoxes.indexOf(headerGroup);\n      var dragTargetIndex = this.props.columnsMap[headerGroup.props.columns[0]].computedVisibleIndex;\n      var dragTargetDepth = headerGroup.props.depth;\n      var dragTargetLength = headerGroup.props.columns.length;\n      var parentsForColumns = getParentsForColumns(this.props.visibleColumns, this.props.computedGroupsMap, this.props.computedGroupsDepth);\n      this.maybeDragMouseDown(event, {\n        dragTarget: 'headergroup',\n        dragTargetIndex: dragTargetIndex,\n        dragTargetDepth: dragTargetDepth,\n        dragTargetLength: dragTargetLength,\n        parentsForColumns: parentsForColumns,\n        dragTargetNode: dragTargetNode,\n        dragIndex: dragIndex,\n        dragBoxes: dragBoxes,\n        allowTargetChange: false,\n        ranges: (0, _getRangesForBoxes.default)(dragBoxes, function (i) {\n          return i;\n        })\n      });\n    }\n  }, {\n    key: \"onHeaderCellTouchStart\",\n    value: function onHeaderCellTouchStart() {\n      return this.onHeaderCellMouseDown.apply(this, arguments);\n    }\n  }, {\n    key: \"onHeaderCellMouseDown\",\n    value: function onHeaderCellMouseDown(_ref3, event) {\n      var visibleIndex = _ref3.computedVisibleIndex;\n\n      var _ref4 = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {\n        dragTarget: 'header'\n      },\n          _ref4$dragTarget = _ref4.dragTarget,\n          dragTarget = _ref4$dragTarget === void 0 ? 'header' : _ref4$dragTarget,\n          dragIndex = _ref4.dragIndex;\n\n      if (this.props.reorderColumns === false) {\n        return;\n      }\n\n      if ((0, _isFocusable.default)(event.target)) {\n        return;\n      }\n\n      if (event.nativeEvent.which == 3 || event.metaKey || event.ctrlKey) {\n        return;\n      }\n\n      if (dragIndex === undefined) {\n        dragIndex = visibleIndex;\n      }\n\n      if (event.ctrlKey || event.metaKey) {\n        return;\n      }\n\n      var allowTargetChange = undefined;\n      var dragColumn;\n      var dragTargetNode = this.getCellDOMNodeAt(visibleIndex);\n\n      if (dragTarget == 'header') {\n        dragColumn = this.props.visibleColumns[visibleIndex];\n\n        if (!dragColumn || dragColumn.groupColumn || dragColumn.draggable === false) {\n          event.stopPropagation();\n          return;\n        }\n\n        if (this.props.computedGroupBy) {\n          if (this.props.computedGroupBy.indexOf(dragColumn.id) != -1 || this.props.computedGroupBy.indexOf(dragColumn.name) != -1) {\n            allowTargetChange = false;\n          }\n        }\n\n        if (dragColumn.draggable === false) {\n          return;\n        }\n\n        if (dragColumn.groupBy === false) {\n          allowTargetChange = false;\n        }\n      }\n\n      var dragTargetIndex = dragIndex;\n      var dragTargetDepth = dragColumn && dragColumn.group && this.props.computedGroupsMap && this.props.computedGroupsMap[dragColumn.group] ? this.props.computedGroupsMap[dragColumn.group].computedDepth + 1 : this.props.computedGroupsDepth + 1;\n      var parentsForColumns = getParentsForColumns(this.props.visibleColumns, this.props.computedGroupsMap, this.props.computedGroupsDepth);\n      this.maybeDragMouseDown(event, {\n        dragTarget: dragTarget,\n        dragIndex: dragIndex,\n        dragTargetNode: dragTargetNode,\n        parentsForColumns: parentsForColumns,\n        dragTargetIndex: dragTargetIndex,\n        dragTargetDepth: dragTargetDepth,\n        dragTargetLength: 1,\n        allowTargetChange: allowTargetChange\n      });\n    }\n  }, {\n    key: \"maybeDragMouseDown\",\n    value: function maybeDragMouseDown(event, _ref5) {\n      var _this3 = this;\n\n      var dragTarget = _ref5.dragTarget,\n          dragIndex = _ref5.dragIndex,\n          allowTargetChange = _ref5.allowTargetChange,\n          ranges = _ref5.ranges,\n          parentsForColumns = _ref5.parentsForColumns,\n          dragTargetIndex = _ref5.dragTargetIndex,\n          dragTargetDepth = _ref5.dragTargetDepth,\n          dragTargetNode = _ref5.dragTargetNode,\n          dragTargetLength = _ref5.dragTargetLength;\n\n      if (this.props.computedPivot) {\n        return;\n      }\n\n      this._dragIndex = dragIndex;\n\n      var _removeListeners;\n\n      var mouseMoveEventCount = 0;\n      var didSetupDrag = false;\n\n      var cleanup = function cleanup() {\n        delete _this3._dragIndex;\n\n        if (_removeListeners) {\n          _removeListeners();\n        }\n      };\n\n      var onMouseUp = cleanup;\n\n      var onMouseMove = function onMouseMove(event) {\n        if (didSetupDrag) {\n          return;\n        }\n\n        mouseMoveEventCount++;\n\n        if (mouseMoveEventCount > 1) {\n          didSetupDrag = true;\n\n          _removeListeners();\n\n          _this3.setupDrag({\n            dragTarget: dragTarget,\n            dragIndex: dragIndex,\n            allowTargetChange: allowTargetChange,\n            ranges: ranges,\n            parentsForColumns: parentsForColumns,\n            dragTargetIndex: dragTargetIndex,\n            dragTargetDepth: dragTargetDepth,\n            dragTargetLength: dragTargetLength,\n            dragTargetNode: dragTargetNode\n          }, event);\n        }\n      };\n\n      var mouseup = _isMobile.default ? 'touchend' : 'mouseup';\n      var mousemove = _isMobile.default ? 'touchmove' : 'mousemove';\n\n      _removeListeners = function removeListeners() {\n        _removeListeners = null;\n        globalObject.removeEventListener(mouseup, onMouseUp, false);\n        globalObject.removeEventListener(mousemove, onMouseMove, false);\n      };\n\n      if (_isMobile.default) {\n        setTimeout(function () {\n          onMouseUp();\n        }, 350);\n      }\n\n      globalObject.addEventListener(mouseup, onMouseUp, false);\n      globalObject.addEventListener(mousemove, onMouseMove, false);\n    }\n  }, {\n    key: \"renderReorderIndicator\",\n    value: function renderReorderIndicator() {\n      var size = this.props.reorderProxySize;\n      return _react.default.createElement(ReorderArrow, {\n        ref: this.refReorderArrow,\n        size: size,\n        rtl: this.props.rtl,\n        renderReorderIndicator: this.props.renderReorderIndicator\n      });\n    }\n  }, {\n    key: \"setReorderArrowAt\",\n    value: function setReorderArrowAt(index, ranges, target) {\n      var offset = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n      var visible = arguments.length > 4 ? arguments[4] : undefined;\n      visible = visible !== undefined ? visible : index != DRAG_INFO.dragIndex || target != DRAG_INFO.dragTarget;\n\n      if (offset) {\n        visible = true;\n      }\n\n      var rtl = this.props.rtl;\n      this.reorderArrow.setVisible(visible);\n      var last = index == ranges.length;\n      var box = ranges[index];\n      var _DRAG_INFO = DRAG_INFO,\n          headerRegion = _DRAG_INFO.headerRegion,\n          initialScrollLeft = _DRAG_INFO.initialScrollLeft;\n\n      if (!box && last) {\n        var _box;\n\n        var lastBox = ranges[ranges.length - 1] || {\n          left: headerRegion.left,\n          right: headerRegion.left\n        };\n        box = (_box = {}, (0, _defineProperty2.default)(_box, rtl ? 'right' : 'left', rtl ? lastBox.left : lastBox.right), (0, _defineProperty2.default)(_box, \"computedLocked\", lastBox.computedLocked), _box);\n      }\n\n      box = box || (rtl ? {\n        right: 0\n      } : {\n        left: 0\n      });\n      var boxPos = rtl ? box.right : box.left;\n\n      if (rtl && this.props.nativeScroll && this.props.scrollbars.vertical) {\n        boxPos -= (0, _getScrollbarWidth.default)();\n      }\n\n      return this.setReorderArrowPosition(rtl ? -boxPos + headerRegion.right - offset : boxPos - headerRegion.left + offset, target);\n    }\n  }, {\n    key: \"setReorderArrowPosition\",\n    value: function setReorderArrowPosition(pos, target) {\n      var rtl = this.props.rtl;\n      this.reorderArrowPosition = this.reorderArrowPosition || {};\n      (0, _assignDefined2.default)(this.reorderArrowPosition, (0, _defineProperty2.default)({}, rtl ? 'right' : 'left', pos));\n      this.reorderArrow.set(_objectSpread((0, _defineProperty2.default)({\n        target: target\n      }, rtl ? 'right' : 'left', rtl ? this.reorderArrowPosition.right : this.reorderArrowPosition.left), DRAG_INFO.reorderProxyPosition[target]));\n      return this;\n    }\n  }, {\n    key: \"setReorderArrowVisible\",\n    value: function setReorderArrowVisible(visible) {\n      this.reorderArrow.setVisible(visible);\n      return this;\n    }\n  }, {\n    key: \"getGroupToolbar\",\n    value: function getGroupToolbar() {\n      return this.groupToolbar.current;\n    }\n  }, {\n    key: \"getGroupByItems\",\n    value: function getGroupByItems() {\n      if (!this.groupToolbar.current) {\n        return null;\n      }\n\n      return this.groupToolbar.current.getSortedItemsInfo();\n    }\n  }, {\n    key: \"getHeaderCells\",\n    value: function getHeaderCells() {\n      return this.header.getCells();\n    }\n  }, {\n    key: \"getBoxesFor\",\n    value: function getBoxesFor(target) {\n      if (target == 'header') {\n        return this.header.getCells();\n      }\n\n      if (target == 'group' && this.groupToolbar.current) {\n        return this.groupToolbar.current.getCells();\n      }\n\n      if (target == 'headergroup') {\n        return this.header.getGroupsAndCells();\n      }\n\n      return [];\n    }\n  }, {\n    key: \"getDragBoxInstance\",\n    value: function getDragBoxInstance(dragIndex, dragTarget, dragTargetDepth, dragTargetLength) {\n      if (dragTarget === 'group') {\n        return this.getGroupToolbar().getCells()[dragIndex];\n      }\n\n      var dragCell = this.getHeaderCells()[dragIndex];\n      var dragBox = dragCell;\n\n      if (dragTargetLength) {\n        var cellProps = dragCell.getProps();\n\n        while (cellProps.depth > dragTargetDepth) {\n          if (cellProps.parent) {\n            dragBox = cellProps.parent;\n            cellProps = dragBox.props;\n          } else {\n            break;\n          }\n        }\n      }\n\n      return dragBox;\n    }\n  }, {\n    key: \"setupDrag\",\n    value: function setupDrag(_ref6, event) {\n      var _DRAG_INFO2;\n\n      var dragTarget = _ref6.dragTarget,\n          dragIndex = _ref6.dragIndex,\n          _ref6$allowTargetChan = _ref6.allowTargetChange,\n          allowTargetChange = _ref6$allowTargetChan === void 0 ? true : _ref6$allowTargetChan,\n          parentsForColumns = _ref6.parentsForColumns,\n          dragTargetIndex = _ref6.dragTargetIndex,\n          dragTargetDepth = _ref6.dragTargetDepth,\n          dragTargetLength = _ref6.dragTargetLength;\n      var columns = this.props.visibleColumns;\n      var rtl = this.props.rtl;\n\n      var headerRegion = _region.default.from(this.headerDomNode.current);\n\n      var dragBox = this.getDragBoxInstance(dragIndex, dragTarget, dragTargetDepth, dragTargetLength);\n      var initialScrollLeft = this.getScrollLeft();\n      var dragBoxProps = dragBox.getProps ? dragBox.getProps() : dragBox.props;\n      var rtlOffset = Math.max(this.props.totalComputedWidth - this.props.size.width, 0);\n      var columnRanges = (0, _getRangesForColumns.default)(columns, {\n        rtl: rtl,\n        rtlOffset: rtlOffset,\n        initialOffset: rtl ? headerRegion.right : headerRegion.left,\n        headerRegion: headerRegion,\n        initialScrollLeft: initialScrollLeft,\n        availableWidth: Math.min(this.props.availableWidth, this.props.totalComputedWidth),\n        totalLockedEndWidth: this.props.totalLockedEndWidth\n      });\n      var groupByRanges = this.props.computedGroupBy && this.props.computedGroupBy.length ? (0, _getRangesForBoxes.default)(this.getGroupToolbar().getCells()) : [];\n      var dragProxy = dragTarget == 'header' ? this.dragCell : dragTarget == 'group' ? this.dragGroupItem : this.dragHeaderGroup;\n      var dragColumn = dragTarget === 'group' ? dragBoxProps.column : columns[dragIndex];\n      var headerDragColumn = dragTarget == 'header' ? dragColumn : null;\n      var columnId = dragTarget == 'header' ? headerDragColumn.id : dragTarget == 'group' ? dragColumn.id : null;\n      var dragBoxNode = dragBox.domRef ? dragBox.domRef.current : null;\n      var dragBoxInitialRegion = dragBox && dragBox.getProxyRegion ? dragBox.getProxyRegion() : _region.default.from(dragBoxNode);\n\n      if (_DragCell.MAX_WIDTH && dragBoxInitialRegion.getWidth() > _DragCell.MAX_WIDTH) {\n        dragBoxInitialRegion.setWidth(_DragCell.MAX_WIDTH);\n      }\n\n      if (_region.default.from(dragBoxNode).getWidth() > headerRegion.getWidth() / 2) {\n        if (rtl) {\n          dragBoxInitialRegion.shift({\n            right: event.pageX - dragBoxInitialRegion.right - this.props.columnReorderScrollByAmount\n          });\n        } else {\n          dragBoxInitialRegion.shift({\n            left: event.pageX - dragBoxInitialRegion.left - this.props.columnReorderScrollByAmount\n          });\n        }\n      }\n\n      var dragBoxOffsets = (0, _defineProperty2.default)({\n        top: headerRegion.top\n      }, rtl ? 'right' : 'left', rtl ? headerRegion.right : headerRegion.left);\n\n      var extendedDragBoxProps = _objectSpread({}, dragBoxProps);\n\n      if (this.props.renderColumnReorderProxy) {\n        Object.assign(extendedDragBoxProps, {\n          renderColumnReorderProxy: this.props.renderColumnReorderProxy\n        });\n      }\n\n      dragProxy.setProps(extendedDragBoxProps);\n      var dragProxyPosition = (0, _defineProperty2.default)({\n        top: dragBoxInitialRegion.top - dragBoxOffsets.top\n      }, rtl ? 'right' : 'left', rtl ? dragBoxOffsets.right - dragBoxInitialRegion.right : dragBoxInitialRegion.left - dragBoxOffsets.left);\n      dragProxy.setHeight(dragBoxInitialRegion.height);\n      dragProxy.setWidth(dragBoxInitialRegion.width);\n      dragProxy.setTop(dragProxyPosition.top);\n\n      if (rtl) {\n        dragProxy.setRight(dragProxyPosition.right);\n      } else {\n        dragProxy.setLeft(dragProxyPosition.left);\n      }\n\n      this.setReorderArrowVisible(headerDragColumn ? headerDragColumn.draggable !== false : true);\n      var maxHeaderIndex = columns.length - (0, _getUndraggableSuccessiveCount.default)((0, _toConsumableArray2.default)(columns).reverse());\n      var minHeaderIndex = (0, _getUndraggableSuccessiveCount.default)(columns);\n      var validDropPositions = columns.reduce(function (acc, col, i) {\n        acc[i] = true;\n        return acc;\n      }, {});\n      validDropPositions[columns.length] = true;\n\n      if (this.props.groups && this.props.groups.length && !this.props.allowGroupSplitOnReorder) {\n        validDropPositions = getValidDropPositions({\n          dragTargetDepth: dragTargetDepth,\n          dragTargetIndex: dragTargetIndex,\n          dragTargetLength: dragTargetLength,\n          parentsForColumns: parentsForColumns,\n          columns: columns,\n          allowGroupSplitOnReorder: this.props.allowGroupSplitOnReorder,\n          maxDepth: this.props.computedGroupsDepth + 1\n        });\n      }\n\n      if (validDropPositions && !validDropPositions[dragIndex] && dragTarget != 'group') {\n        validDropPositions[dragIndex] = true;\n      }\n\n      var wrapperNode = this.headerDomNode ? this.headerDomNode.current : null;\n      var filterRowHeight = 0;\n\n      if (this.props.computedFilterable) {\n        var filterWrapperNode = wrapperNode.querySelector('.InovuaReactDataGrid__column-header__filter-wrapper');\n\n        if (filterWrapperNode) {\n          filterRowHeight = filterWrapperNode.offsetHeight;\n        }\n      }\n\n      DRAG_INFO = (_DRAG_INFO2 = {\n        allowTargetChange: allowTargetChange,\n        columnId: columnId,\n        headerRegion: headerRegion,\n        headerDragColumn: headerDragColumn,\n        minHeaderIndex: minHeaderIndex,\n        maxHeaderIndex: maxHeaderIndex,\n        dragColumn: dragColumn,\n        dragColumnsIds: dragTarget == 'headergroup' ? dragBox.props.columns : null,\n        dragBox: dragBox,\n        dragBoxInitialRegion: dragBoxInitialRegion,\n        dragBoxRegion: dragBoxInitialRegion.clone(),\n        dragBoxProps: dragBoxProps,\n        dragBoxOffsets: dragBoxOffsets,\n        dragProxy: dragProxy,\n        dragProxyInitialPosition: dragProxyPosition,\n        dragTarget: dragTarget,\n        dropTarget: dragTarget,\n        dragIndex: dragIndex,\n        columnRanges: columnRanges,\n        groupByRanges: groupByRanges,\n        parentsForColumns: parentsForColumns,\n        dragTargetIndex: dragTargetIndex,\n        dragTargetDepth: dragTargetDepth,\n        dragTargetLength: dragTargetLength,\n        scrollLeftMax: this.props.getScrollLeftMax(),\n        initialScrollLeft: initialScrollLeft\n      }, (0, _defineProperty2.default)(_DRAG_INFO2, \"headerRegion\", headerRegion), (0, _defineProperty2.default)(_DRAG_INFO2, \"validDropPositions\", validDropPositions), _DRAG_INFO2);\n      var groupToolbarNode = this.groupToolbar.current ? this.groupToolbar.current.domRef ? this.groupToolbar.current.domRef.current : null : null;\n      var headerGroupTargetNode = wrapperNode;\n      var groupTargetNode = groupToolbarNode || this.headerDomNode.current;\n      var groupComputedStyle = getComputedStyle(groupTargetNode);\n      DRAG_INFO.reorderProxyPosition = {\n        group: {\n          top: parseInt(groupComputedStyle.paddingTop),\n          bottom: groupTargetNode.offsetHeight - parseInt(groupComputedStyle.paddingBottom)\n        },\n        header: {\n          top: this.props.computedGroupBy ? groupTargetNode.offsetHeight : 0,\n          bottom: headerGroupTargetNode.offsetHeight - filterRowHeight\n        },\n        headergroup: {\n          top: this.props.computedGroupBy ? groupTargetNode.offsetHeight : 0,\n          bottom: headerGroupTargetNode.offsetHeight - filterRowHeight\n        }\n      };\n      this.setReorderArrowAt(dragIndex, dragTarget === 'group' ? groupByRanges : columnRanges, dragTarget);\n      this.setReorderArrowPosition(undefined, dragTarget);\n      dragProxy.setDragging(true);\n      this.props.coverHandleRef.current.setActive(true);\n      this.props.coverHandleRef.current.setCursor('grabbing');\n      var headerNode = this.headerDomNode ? this.headerDomNode.current : null;\n      (0, _setupColumnDrag.default)({\n        constrainTo: this.props.constrainReorder ? _region.default.from(headerNode.parentNode) : undefined,\n        region: dragBoxInitialRegion\n      }, {\n        onDrag: this.onHeaderCellDrag,\n        onDrop: this.onHeaderCellDrop\n      }, event);\n    }\n  }, {\n    key: \"onHeaderCellDrop\",\n    value: function onHeaderCellDrop() {\n      var _this4 = this;\n\n      this.props.coverHandleRef.current.setActive(false);\n      delete this._dragIndex;\n      var dropIndex = this.dropIndex,\n          props = this.props;\n\n      if (dropIndex === undefined || !DRAG_INFO) {\n        if (DRAG_INFO) {\n          DRAG_INFO.dragProxy.setDragging(false);\n        }\n\n        this.setReorderArrowVisible(false);\n        DRAG_INFO = null;\n        return;\n      }\n\n      var _DRAG_INFO3 = DRAG_INFO,\n          dragColumn = _DRAG_INFO3.dragColumn,\n          columnId = _DRAG_INFO3.columnId,\n          dragColumnsIds = _DRAG_INFO3.dragColumnsIds,\n          dragTarget = _DRAG_INFO3.dragTarget,\n          dropTarget = _DRAG_INFO3.dropTarget,\n          dragProxy = _DRAG_INFO3.dragProxy,\n          newLocked = _DRAG_INFO3.newLocked;\n      var _DRAG_INFO4 = DRAG_INFO,\n          dragIndex = _DRAG_INFO4.dragIndex;\n      DRAG_INFO = null;\n      this.setReorderArrowVisible(false);\n      dragProxy.setDragging(false);\n      var columns = this.props.visibleColumns;\n      var currentLocked = columns[dragIndex].computedLocked;\n\n      if (dropIndex == dragIndex && newLocked === currentLocked && dragTarget == dropTarget) {\n        return;\n      }\n\n      if (this.props.virtualizeColumns) {\n        setTimeout(function () {\n          _this4.header.updateColumns();\n        }, 10);\n      }\n\n      if (dragTarget == 'headergroup') {\n        if (dropIndex == dragIndex && dragTarget == dropTarget) {\n          return;\n        }\n\n        if (columns[dropIndex]) {\n          this.moveColumnsBeforeIndex(dragColumnsIds, columns[dropIndex].computedVisibleIndex, newLocked);\n        } else if (dropIndex == columns.length) {\n          var col = columns[columns.length - 1];\n\n          if (col) {\n            this.moveColumnsBeforeIndex(dragColumnsIds, col.computedVisibleIndex + 1, newLocked);\n          }\n        }\n\n        return;\n      }\n\n      var visibleColumns = props.visibleColumns,\n          groupBy = props.computedGroupBy;\n\n      if (dropTarget == dragTarget) {\n        if (dragTarget == 'group') {\n          this.setGroupBy((0, _moveXBeforeY.default)(groupBy, dragIndex, dropIndex));\n        }\n\n        if (dragTarget == 'header') {\n          this.moveColumnsBeforeIndex([columnId], dropIndex, newLocked);\n        }\n      }\n\n      if (dragTarget == 'header' && dropTarget == 'group') {\n        var groupByColumn = visibleColumns[dragIndex];\n        var newGroupBy = [].concat(groupBy);\n        newGroupBy.splice(dropIndex, 0, groupByColumn.id);\n        this.setGroupBy(newGroupBy);\n      }\n\n      if (dragTarget == 'group' && dropTarget == 'header') {\n        this.ungroupColumnToIndex(columnId, dropIndex);\n      }\n    }\n  }, {\n    key: \"ungroupColumnToIndex\",\n    value: function ungroupColumnToIndex(columnId, dropIndex) {\n      var props = this.props;\n      var allColumns = props.allColumns,\n          visibleColumns = props.visibleColumns;\n      var dragColumn = allColumns.filter(function (c) {\n        return c.id === columnId;\n      })[0];\n      var newGroupBy = [].concat(this.props.computedGroupBy).filter(function (g) {\n        return g != columnId;\n      });\n      var columnAtDropIndex = visibleColumns[dropIndex];\n\n      if (columnAtDropIndex && columnAtDropIndex.id === columnId) {\n        this.setGroupBy(newGroupBy);\n        return;\n      }\n\n      var order = getColumnOrder(props, function (c) {\n        return c.id !== columnId;\n      });\n      var insertIndex = columnAtDropIndex ? order.indexOf(columnAtDropIndex.id) : order.length;\n      order.splice(insertIndex, 0, columnId);\n      var columnAtDropIndexOrLast = columnAtDropIndex || visibleColumns[visibleColumns.length - 1];\n\n      if (columnAtDropIndexOrLast.computedLocked != dragColumn.computedLocked) {\n        this.props.setColumnLocked(columnId, columnAtDropIndexOrLast.computedLocked);\n      }\n\n      this.setGroupBy(newGroupBy);\n      this.setColumnOrder(order);\n    }\n  }, {\n    key: \"moveColumnsBeforeIndex\",\n    value: function moveColumnsBeforeIndex(columnsIds, dropIndex, newLocked) {\n      var _this5 = this;\n\n      var props = this.props;\n      var visibleColumns = props.visibleColumns,\n          columnVisibilityMap = props.columnVisibilityMap,\n          allowGroupSplitOnReorder = props.allowGroupSplitOnReorder;\n      var columnOrder = getColumnOrder(props);\n      var columns = visibleColumns.filter(function (col) {\n        return columnsIds.indexOf(col.id) != -1;\n      });\n      var dragColumnsIndexesInAllColumns = columnsIds.map(function (columnId) {\n        return columnOrder.indexOf(columnId);\n      });\n      var dropBeforeIndexInAllColumns = visibleColumns[dropIndex] ? columnOrder.indexOf(visibleColumns[dropIndex].id) : columnOrder.length;\n      var firstDragIndex = dragColumnsIndexesInAllColumns[0];\n\n      if (!allowGroupSplitOnReorder && firstDragIndex < dropBeforeIndexInAllColumns) {\n        while (true) {\n          var columnRightBefore = columnOrder[dropBeforeIndexInAllColumns - 1];\n\n          if (columnRightBefore && columnVisibilityMap[columnRightBefore] === false) {\n            dropBeforeIndexInAllColumns--;\n            continue;\n          }\n\n          break;\n        }\n      }\n\n      var targetColumn = visibleColumns[dropIndex] || visibleColumns[visibleColumns.length - 1];\n      columns.forEach(function (col) {\n        if (newLocked != col.computedLocked) {\n          _this5.props.setColumnLocked(col.id, newLocked);\n        }\n      });\n      var newColumnOrder = (0, _moveXBeforeY.default)(columnOrder, dragColumnsIndexesInAllColumns, dropBeforeIndexInAllColumns);\n      this.setColumnOrder(newColumnOrder);\n    }\n  }, {\n    key: \"onHeaderCellDrag\",\n    value: function onHeaderCellDrag(_ref7) {\n      var diffLeft = _ref7.left,\n          diffTop = _ref7.top;\n\n      if (!DRAG_INFO) {\n        return;\n      }\n\n      var _DRAG_INFO5 = DRAG_INFO,\n          allowTargetChange = _DRAG_INFO5.allowTargetChange,\n          dragTarget = _DRAG_INFO5.dragTarget,\n          dragIndex = _DRAG_INFO5.dragIndex,\n          dragProxy = _DRAG_INFO5.dragProxy,\n          dragColumn = _DRAG_INFO5.dragColumn,\n          dragBoxInitialRegion = _DRAG_INFO5.dragBoxInitialRegion,\n          dragBoxOffsets = _DRAG_INFO5.dragBoxOffsets,\n          dragBoxRegion = _DRAG_INFO5.dragBoxRegion,\n          groupByRanges = _DRAG_INFO5.groupByRanges,\n          theRanges = _DRAG_INFO5.columnRanges,\n          headerRegion = _DRAG_INFO5.headerRegion,\n          scrollLeftMax = _DRAG_INFO5.scrollLeftMax,\n          initialScrollLeft = _DRAG_INFO5.initialScrollLeft,\n          validDropPositions = _DRAG_INFO5.validDropPositions;\n      dragBoxRegion.set({\n        left: dragBoxInitialRegion.left,\n        top: dragBoxInitialRegion.top,\n        bottom: dragBoxInitialRegion.bottom,\n        right: dragBoxInitialRegion.right\n      });\n      var _DRAG_INFO6 = DRAG_INFO,\n          dropTarget = _DRAG_INFO6.dropTarget;\n      var _this$props2 = this.props,\n          columnReorderScrollByAmount = _this$props2.columnReorderScrollByAmount,\n          rtl = _this$props2.rtl;\n      var scrollLeft = this.getScrollLeft();\n      var scrollDiff = scrollLeft - initialScrollLeft;\n      var initialDiffLeft = diffLeft;\n      dragBoxRegion.shift({\n        top: diffTop,\n        left: diffLeft\n      });\n      diffLeft += scrollDiff;\n      var minScrollLeft = Math.max(headerRegion.left, 0);\n      var maxScrollRight = headerRegion.right;\n      var groupToolbarNode = this.groupToolbar && this.groupToolbar.current && this.groupToolbar.current.domRef ? this.groupToolbar.current.domRef.current : null;\n\n      if (this.groupToolbar.current && allowTargetChange) {\n        var groupToolbarRegion = _region.default.from(groupToolbarNode);\n\n        if (dragBoxRegion.top + dragBoxRegion.height / 2 < groupToolbarRegion.bottom) {\n          if (dropTarget !== 'group' && dragColumn.groupBy !== false) {\n            dropTarget = DRAG_INFO.dropTarget = 'group';\n          }\n        } else {\n          if (dropTarget != 'header') {\n            dropTarget = DRAG_INFO.dropTarget = 'header';\n          }\n        }\n      }\n\n      var scrollAdjust = 0;\n      var dragProxyAdjust = 0;\n      var dragComputedLocked = this.props.visibleColumns[dragIndex].computedLocked;\n\n      if (dropTarget == 'header' || dropTarget == 'headergroup') {\n        if (dragBoxInitialRegion.left + initialDiffLeft - this.props.totalLockedStartWidth < minScrollLeft + SCROLL_MARGIN && initialDiffLeft < 0) {\n          scrollAdjust = -columnReorderScrollByAmount;\n        } else if (dragBoxInitialRegion.right + initialDiffLeft > maxScrollRight - SCROLL_MARGIN - this.props.totalLockedEndWidth && initialDiffLeft > 0) {\n          scrollAdjust = columnReorderScrollByAmount;\n        }\n\n        if (scrollAdjust) {\n          if (scrollLeft + scrollAdjust < 0) {\n            scrollAdjust = -scrollLeft;\n          }\n\n          if (scrollLeft + scrollAdjust > scrollLeftMax) {\n            scrollAdjust = scrollLeftMax - scrollLeft;\n          }\n\n          if (scrollAdjust) {\n            this.setScrollLeft(scrollLeft + scrollAdjust);\n            dragProxyAdjust = scrollAdjust;\n          }\n        }\n      }\n\n      if (rtl) {\n        dragProxy.setRight(dragBoxOffsets.right + -initialDiffLeft - dragBoxInitialRegion.right - dragProxyAdjust);\n      } else {\n        dragProxy.setLeft(dragBoxInitialRegion.left + initialDiffLeft - dragBoxOffsets.left - dragProxyAdjust);\n      }\n\n      dragProxy.setTop(dragBoxRegion.top - dragBoxOffsets.top);\n      var dir = dropTarget == 'group' && dragTarget == 'group' ? initialDiffLeft < 0 ? -1 : 1 : dragTarget != dropTarget || diffLeft < 0 ? -1 : 1;\n\n      if (dragComputedLocked) {\n        dir = initialDiffLeft < 0 ? -1 : 1;\n      }\n\n      if (rtl) {\n        dir *= -1;\n      }\n\n      var mapRange = function mapRange(r) {\n        if (!r.computedLocked) {\n          return _objectSpread(_objectSpread({}, r), {}, {\n            left: r.left - scrollDiff,\n            right: r.right - scrollDiff\n          });\n        }\n\n        return r;\n      };\n\n      var currentRanges = dropTarget === 'group' ? groupByRanges : theRanges;\n      var ranges = currentRanges.map(mapRange);\n      var compareRanges = currentRanges.map(mapRange);\n      var dragMinIndex = dropTarget == 'header' ? DRAG_INFO.minHeaderIndex : undefined;\n      var dragMaxIndex = dropTarget == 'header' ? DRAG_INFO.maxHeaderIndex : undefined;\n      var dropIndex;\n\n      var _getDropIndex = (0, _getDropIndex2.default)({\n        dir: dir,\n        rtl: rtl,\n        dragMinIndex: dragMinIndex,\n        dragMaxIndex: dragMaxIndex,\n        dragTarget: dragTarget,\n        dropTarget: dropTarget,\n        dragRange: _objectSpread(_objectSpread({}, ranges[dragIndex]), {}, {\n          left: dragBoxRegion.left,\n          right: dragBoxRegion.right,\n          index: dragIndex\n        }),\n        dragIndex: dragIndex,\n        ranges: compareRanges,\n        validDropPositions: dropTarget === dragTarget ? validDropPositions : undefined\n      }),\n          newDropIndex = _getDropIndex.index,\n          locked = _getDropIndex.locked;\n\n      DRAG_INFO.newLocked = locked;\n\n      if (newDropIndex != undefined) {\n        dropIndex = newDropIndex;\n      }\n\n      var offset = 0;\n      var visible;\n\n      if (locked === 'start' && newDropIndex === this.props.firstUnlockedIndex) {\n        offset = (rtl ? -1 : 1) * -11;\n      }\n\n      if (newDropIndex === this.props.firstLockedEndIndex && dragIndex !== this.props.firstLockedEndIndex) {\n        if (locked === 'end') {\n          offset = (rtl ? -1 : 1) * 4;\n        } else if (!locked) {\n          offset = (rtl ? -1 : 1) * -6;\n        }\n      }\n\n      if (newDropIndex === this.props.visibleColumns.length) {\n        offset = rtl ? 6 : -6;\n      }\n\n      if (locked == null && dragComputedLocked === 'end' && newDropIndex === this.props.firstLockedEndIndex) {\n        visible = true;\n      }\n\n      this.dropIndex = dropIndex;\n      this.setReorderArrowVisible(true);\n      this.setReorderArrowPosition(undefined, dropTarget);\n      this.setReorderArrowAt(dropIndex, compareRanges, dropTarget, offset, visible);\n    }\n  }, {\n    key: \"setColumnOrder\",\n    value: function setColumnOrder(newColumnOrder) {\n      var columnOrder = getColumnOrder(this.props);\n\n      if (this.props.setColumnOrder && JSON.stringify(columnOrder) !== JSON.stringify(newColumnOrder)) {\n        this.props.setColumnOrder(newColumnOrder);\n      }\n    }\n  }, {\n    key: \"setGroupBy\",\n    value: function setGroupBy(groupBy) {\n      if (this.props.onGroupByChange && JSON.stringify(groupBy) !== JSON.stringify(this.props.computedGroupBy)) {\n        this.props.onGroupByChange(groupBy);\n      }\n    }\n  }, {\n    key: \"insertGroupBy\",\n    value: function insertGroupBy(at, column) {\n      var props = this.props;\n      var order = (0, _toConsumableArray2.default)(props.computedGroupBy);\n      order.splice(at, 0, column.id);\n      this.setGroupBy(order);\n    }\n  }]);\n  return InovuaDataGridHeaderLayout;\n}(_reactClass.default);\n\nexports.default = InovuaDataGridHeaderLayout;\nInovuaDataGridHeaderLayout.propTypes = {\n  i18n: _propTypes.default.func.isRequired,\n  renderGroupToolbar: _propTypes.default.func,\n  renderDragGroupItem: _propTypes.default.func,\n  getScrollLeftMax: _propTypes.default.func.isRequired,\n  setScrollLeft: _propTypes.default.func.isRequired,\n  renderColumnReorderProxy: _propTypes.default.func\n};","map":{"version":3,"sources":["/Users/sungjaejoo/Desktop/ááµáá¢á¨áá³/ááµá«áá¥áá©áá¥/ILP-main/node_modules/@inovua/reactdatagrid-community/Layout/ColumnLayout/HeaderLayout/index.js"],"names":["_interopRequireDefault","require","_typeof","Object","defineProperty","exports","value","default","_defineProperty2","_classCallCheck2","_createClass2","_inherits2","_possibleConstructorReturn2","_getPrototypeOf2","_toConsumableArray2","_react","_interopRequireWildcard","_propTypes","_reactClass","_debounce","_contains","_assignDefined2","_region","_isMobile","_getRangesForBoxes","_getRangesForColumns","_setupColumnDrag","_moveXBeforeY","_isFocusable","_getDropIndex2","_getUndraggableSuccessiveCount","_DragCell","_DragHeaderGroup","_HeaderWrapper","_Header","_getScrollbarWidth","_getGlobal","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","cache","has","get","newObj","hasPropertyDescriptor","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","getOwnPropertyDescriptors","defineProperties","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","result","NewTarget","constructor","Reflect","construct","sham","Proxy","Boolean","valueOf","e","globalObject","getGlobal","SCROLL_MARGIN","DRAG_INFO","preventDefault","getColumnOrder","props","doFilter","c","groupColumn","order","computedColumnOrder","map","id","columnsMap","allColumns","toId","lockedStart","lockedStartColumns","lockedMap","reduce","acc","cId","lockedEnd","lockedEndColumns","concat","getParentsForColumns","columns","groups","maxDepth","parentsForColumns","col","getParentGroups","group","includeSelf","g","name","splice","getValidDropPositions","_ref","dragTargetDepth","dragTargetIndex","dragTargetLength","allowGroupSplitOnReorder","getGroupsForColumn","parents","initialName","shouldCheck","getGroupStartFor","depth","index","initialParent","slice","itParents","currentParent","getGroupEndFor","res","dragTargetParentGroups","x","isSingleColumn","usedDepth","parentGroupStartIndex","parentGroupEndIndex","currentGroupEndIndex","_i","itGroupStartIndex","itGroupEndIndex","groupEndIsLastUnlocked","computedLocked","ReorderArrow","_React$Component","_super","_this","state","visible","bottom","top","left","_ref2","right","setState","setVisible","render","size","_this$state","createElement","ref","refReorderArrow","style","position","width","height","pointerEvents","opacity","display","className","rtl","renderReorderIndicator","Component","defaultProps","InovuaDataGridHeaderLayout","_Component","_super2","_this2","draggingProps","refDragGroupItem","item","dragGroupItem","refDragCell","cell","dragCell","refDragHeaderGroup","dragHeaderGroup","groupToolbar","createRef","refHeader","h","headerNode","getDOMNode","addEventListener","removeEventListener","header","headerWrapper","cmp","reorderArrow","headerDomNode","lazyNotifyHeaderScrollLeftMax","notifyHeaderScrollLeftMax","scrollLeftMax","notifyScrollLeftMax","undefined","getScrollLeftMax","onContainerScrollHorizontal","scrollLeft","setScrollLeft","getScrollLeft","setColumnRenderStartIndex","columnRenderStartIndex","renderGroupToolbar","renderHeaderWrapper","renderDragCell","renderDragGroupItem","renderDragHeaderGroup","_this$props","onGroupByChange","onHeaderSortClick","renderGroupItem","renderSortTool","groupBy","computedGroupBy","disableGroupByToolbar","i18n","theme","headerGroupPlaceholderText","onItemMouseDown","onGroupItemMouseDown","onSortClick","computedShowHeader","onHeaderGroupMouseDown","onHeaderCellMouseDown","onHeaderCellTouchStart","computedGroups","column","event","dragTarget","dragIndex","getCellDOMNodeAt","getHeader","headerGroupProps","headerGroup","ctrlKey","metaKey","_dragIndex","draggable","dragTargetNode","domRef","current","shouldStop","querySelectorAll","filterWrapperNode","groupColumns","colId","dragBoxes","getGroupsAndCells","isHeaderGroup","indexOf","computedVisibleIndex","visibleColumns","computedGroupsMap","computedGroupsDepth","maybeDragMouseDown","allowTargetChange","ranges","_ref3","visibleIndex","_ref4","_ref4$dragTarget","reorderColumns","nativeEvent","which","dragColumn","stopPropagation","computedDepth","_ref5","_this3","computedPivot","_removeListeners","mouseMoveEventCount","didSetupDrag","cleanup","onMouseUp","onMouseMove","setupDrag","mouseup","mousemove","removeListeners","setTimeout","reorderProxySize","setReorderArrowAt","offset","last","box","_DRAG_INFO","headerRegion","initialScrollLeft","_box","lastBox","boxPos","nativeScroll","scrollbars","vertical","setReorderArrowPosition","pos","reorderArrowPosition","reorderProxyPosition","setReorderArrowVisible","getGroupToolbar","getGroupByItems","getSortedItemsInfo","getHeaderCells","getCells","getBoxesFor","getDragBoxInstance","dragBox","cellProps","getProps","parent","_ref6","_DRAG_INFO2","_ref6$allowTargetChan","from","dragBoxProps","rtlOffset","Math","max","totalComputedWidth","columnRanges","initialOffset","availableWidth","min","totalLockedEndWidth","groupByRanges","dragProxy","headerDragColumn","columnId","dragBoxNode","dragBoxInitialRegion","getProxyRegion","MAX_WIDTH","getWidth","setWidth","shift","pageX","columnReorderScrollByAmount","dragBoxOffsets","extendedDragBoxProps","renderColumnReorderProxy","assign","setProps","dragProxyPosition","setHeight","setTop","setRight","setLeft","maxHeaderIndex","reverse","minHeaderIndex","validDropPositions","wrapperNode","filterRowHeight","computedFilterable","querySelector","offsetHeight","dragColumnsIds","dragBoxRegion","clone","dragProxyInitialPosition","dropTarget","groupToolbarNode","headerGroupTargetNode","groupTargetNode","groupComputedStyle","getComputedStyle","parseInt","paddingTop","paddingBottom","headergroup","setDragging","coverHandleRef","setActive","setCursor","constrainTo","constrainReorder","parentNode","region","onDrag","onHeaderCellDrag","onDrop","onHeaderCellDrop","_this4","dropIndex","_DRAG_INFO3","newLocked","_DRAG_INFO4","currentLocked","virtualizeColumns","updateColumns","moveColumnsBeforeIndex","setGroupBy","groupByColumn","newGroupBy","ungroupColumnToIndex","columnAtDropIndex","insertIndex","columnAtDropIndexOrLast","setColumnLocked","setColumnOrder","columnsIds","_this5","columnVisibilityMap","columnOrder","dragColumnsIndexesInAllColumns","dropBeforeIndexInAllColumns","firstDragIndex","columnRightBefore","targetColumn","newColumnOrder","_ref7","diffLeft","diffTop","_DRAG_INFO5","theRanges","_DRAG_INFO6","_this$props2","scrollDiff","initialDiffLeft","minScrollLeft","maxScrollRight","groupToolbarRegion","scrollAdjust","dragProxyAdjust","dragComputedLocked","totalLockedStartWidth","dir","mapRange","r","currentRanges","compareRanges","dragMinIndex","dragMaxIndex","_getDropIndex","dragRange","newDropIndex","locked","firstUnlockedIndex","firstLockedEndIndex","JSON","stringify","insertGroupBy","at","propTypes","func","isRequired"],"mappings":"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","sourcesContent":["/** \n * Copyright Â© INOVUA TRADING.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _typeof = require(\"@babel/runtime/helpers/typeof\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _reactClass = _interopRequireDefault(require(\"../../../packages/react-class\"));\n\nvar _debounce = _interopRequireDefault(require(\"../../../packages/debounce\"));\n\nvar _contains = _interopRequireDefault(require(\"../../../packages/contains\"));\n\nvar _assignDefined2 = _interopRequireDefault(require(\"../../../packages/assign-defined\"));\n\nvar _region = _interopRequireDefault(require(\"../../../packages/region\"));\n\nvar _isMobile = _interopRequireDefault(require(\"../../../packages/isMobile\"));\n\nvar _getRangesForBoxes = _interopRequireDefault(require(\"./getRangesForBoxes\"));\n\nvar _getRangesForColumns = _interopRequireDefault(require(\"./getRangesForColumns\"));\n\nvar _setupColumnDrag = _interopRequireDefault(require(\"./setupColumnDrag\"));\n\nvar _moveXBeforeY = _interopRequireDefault(require(\"../../../utils/moveXBeforeY\"));\n\nvar _isFocusable = _interopRequireDefault(require(\"../../../utils/isFocusable\"));\n\nvar _getDropIndex2 = _interopRequireDefault(require(\"./getDropIndex\"));\n\nvar _getUndraggableSuccessiveCount = _interopRequireDefault(require(\"./getUndraggableSuccessiveCount\"));\n\nvar _DragCell = _interopRequireWildcard(require(\"./DragCell\"));\n\nvar _DragHeaderGroup = _interopRequireDefault(require(\"./DragHeaderGroup\"));\n\nvar _HeaderWrapper = _interopRequireDefault(require(\"./HeaderWrapper\"));\n\nvar _Header = require(\"./Header\");\n\nvar _getScrollbarWidth = _interopRequireDefault(require(\"../../../packages/getScrollbarWidth\"));\n\nvar _getGlobal = require(\"../../../getGlobal\");\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { (0, _defineProperty2.default)(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2.default)(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2.default)(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2.default)(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nvar globalObject = (0, _getGlobal.getGlobal)();\nvar SCROLL_MARGIN = 40;\nvar DRAG_INFO = null;\n\nvar preventDefault = function preventDefault(e) {\n  return e.preventDefault();\n};\n\nvar getColumnOrder = function getColumnOrder(props, filter) {\n  var doFilter = function doFilter(c) {\n    return !c.groupColumn && filter ? filter(c) : true;\n  };\n\n  var order;\n\n  if (props.computedColumnOrder) {\n    order = props.computedColumnOrder.map(function (id) {\n      return props.columnsMap[id];\n    });\n  } else {\n    order = props.allColumns;\n  }\n\n  var toId = function toId(c) {\n    return c.id;\n  };\n\n  order = (order || []).filter(doFilter).map(toId);\n  var lockedStart = props.lockedStartColumns.filter(doFilter).map(toId);\n  var lockedMap = lockedStart.reduce(function (acc, cId) {\n    acc[cId] = true;\n    return acc;\n  }, {});\n  var lockedEnd = props.lockedEndColumns.filter(doFilter).map(toId);\n  lockedEnd.reduce(function (acc, cId) {\n    acc[cId] = true;\n    return acc;\n  }, lockedMap);\n  return [].concat((0, _toConsumableArray2.default)(lockedStart), (0, _toConsumableArray2.default)(order.filter(function (cId) {\n    return !lockedMap[cId];\n  })), (0, _toConsumableArray2.default)(lockedEnd));\n};\n\nvar getParentsForColumns = function getParentsForColumns(columns, groups, maxDepth) {\n  var parentsForColumns = columns.map(function (col) {\n    var result = [col.id].concat((0, _toConsumableArray2.default)((0, _Header.getParentGroups)(col.group, groups, {\n      includeSelf: true\n    }).map(function (g) {\n      return g.name;\n    })));\n\n    while (result.length <= maxDepth + 1) {\n      result.splice(0, 0, result[0]);\n    }\n\n    return result;\n  });\n  return parentsForColumns;\n};\n\nvar getValidDropPositions = function getValidDropPositions(_ref) {\n  var dragTargetDepth = _ref.dragTargetDepth,\n      dragTargetIndex = _ref.dragTargetIndex,\n      dragTargetLength = _ref.dragTargetLength,\n      parentsForColumns = _ref.parentsForColumns,\n      columns = _ref.columns,\n      allowGroupSplitOnReorder = _ref.allowGroupSplitOnReorder;\n\n  var getGroupsForColumn = function getGroupsForColumn(parents) {\n    parents = parents || [];\n    var initialName = parents[0];\n    var shouldCheck = true;\n    var groups = [];\n    parents.forEach(function (group) {\n      if (!shouldCheck) {\n        groups.push(group);\n        return;\n      }\n\n      if (shouldCheck && group !== initialName) {\n        shouldCheck = false;\n        groups.push(group);\n        return;\n      }\n\n      groups.push(null);\n    });\n    return groups;\n  };\n\n  var getGroupStartFor = function getGroupStartFor(parents, depth, index) {\n    var initialParent = parents[index].slice(-depth - 1)[0];\n    var itParents;\n    var currentParent;\n\n    do {\n      itParents = parents[index - 1];\n\n      if (!itParents) {\n        break;\n      }\n\n      currentParent = itParents.slice(-depth - 1)[0];\n\n      if (currentParent !== initialParent) {\n        break;\n      }\n\n      index--;\n    } while (index >= 0);\n\n    return index;\n  };\n\n  var getGroupEndFor = function getGroupEndFor(parents, depth, index) {\n    var initialParent = parents[index].slice(-depth - 1)[0];\n    var itParents;\n    var currentParent;\n\n    do {\n      index++;\n      itParents = parents[index];\n\n      if (!itParents) {\n        break;\n      }\n\n      currentParent = itParents.slice(-depth - 1)[0];\n\n      if (currentParent !== initialParent) {\n        break;\n      }\n    } while (index < parents.length);\n\n    return index;\n  };\n\n  var res = columns.reduce(function (acc, col, index) {\n    if (index > dragTargetIndex && index <= dragTargetIndex + dragTargetLength) {\n      return acc;\n    }\n\n    acc[index] = true;\n    return acc;\n  }, {});\n  res[columns.length] = true;\n\n  if (!allowGroupSplitOnReorder) {\n    var dragTargetParentGroups = getGroupsForColumn(parentsForColumns[dragTargetIndex]).filter(function (x) {\n      return x;\n    });\n    var isSingleColumn = !dragTargetParentGroups.length;\n    var usedDepth = isSingleColumn ? 0 : dragTargetDepth;\n    var parentGroupStartIndex = !usedDepth ? 0 : getGroupStartFor(parentsForColumns, usedDepth - 1, dragTargetIndex);\n    var parentGroupEndIndex = !usedDepth ? columns.length : getGroupEndFor(parentsForColumns, usedDepth - 1, dragTargetIndex);\n    var currentGroupEndIndex = getGroupEndFor(parentsForColumns, usedDepth, dragTargetIndex);\n\n    for (var i = 0; i <= columns.length; i++) {\n      delete res[i];\n    }\n\n    for (var _i = parentGroupStartIndex; _i < parentGroupEndIndex; _i++) {\n      var itGroupStartIndex = getGroupStartFor(parentsForColumns, usedDepth, _i);\n      var itGroupEndIndex = getGroupEndFor(parentsForColumns, usedDepth, _i);\n      res[itGroupStartIndex] = true;\n      res[itGroupEndIndex] = true;\n    }\n\n    var groupEndIsLastUnlocked = columns[currentGroupEndIndex] && columns[currentGroupEndIndex].computedLocked === 'end' && columns[currentGroupEndIndex - 1] && columns[currentGroupEndIndex - 1].computedLocked !== 'end';\n\n    if (!groupEndIsLastUnlocked) {\n      delete res[currentGroupEndIndex];\n    }\n  }\n\n  return res;\n};\n\nvar ReorderArrow = function (_React$Component) {\n  (0, _inherits2.default)(ReorderArrow, _React$Component);\n\n  var _super = _createSuper(ReorderArrow);\n\n  function ReorderArrow(props) {\n    var _this;\n\n    (0, _classCallCheck2.default)(this, ReorderArrow);\n    _this = _super.call(this, props);\n    _this.state = {\n      visible: false,\n      bottom: 0,\n      top: 0,\n      left: 0\n    };\n    return _this;\n  }\n\n  (0, _createClass2.default)(ReorderArrow, [{\n    key: \"set\",\n    value: function set(_ref2) {\n      var bottom = _ref2.bottom,\n          top = _ref2.top,\n          left = _ref2.left,\n          right = _ref2.right,\n          target = _ref2.target;\n      this.setState({\n        target: target,\n        bottom: bottom,\n        left: left,\n        top: top,\n        right: right\n      });\n    }\n  }, {\n    key: \"setVisible\",\n    value: function setVisible(visible) {\n      if (visible != this.state.visible) {\n        this.setState({\n          visible: visible\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var size = this.props.size;\n      var _this$state = this.state,\n          bottom = _this$state.bottom,\n          top = _this$state.top,\n          left = _this$state.left,\n          right = _this$state.right,\n          visible = _this$state.visible,\n          target = _this$state.target;\n      return _react.default.createElement(\"div\", {\n        ref: this.refReorderArrow,\n        style: {\n          position: 'absolute',\n          top: top,\n          left: left,\n          right: right,\n          width: size,\n          height: bottom - top,\n          bottom: bottom,\n          pointerEvents: 'none',\n          opacity: visible ? 1 : 0,\n          display: 'block'\n        },\n        className: \"InovuaReactDataGrid__column-reorder-arrow InovuaReactDataGrid__column-reorder-arrow--direction-\".concat(this.props.rtl ? 'rtl' : 'ltr')\n      }, _react.default.createElement(\"div\", {\n        className: \"InovuaReactDataGrid__column-reorder-arrow-fill InovuaReactDataGrid__column-reorder-arrow-fill--direction-\".concat(this.props.rtl ? 'rtl' : 'ltr', \" InovuaReactDataGrid__column-reorder-arrow-fill--target-\").concat(target || 'none')\n      }), this.props.renderReorderIndicator());\n    }\n  }]);\n  return ReorderArrow;\n}(_react.default.Component);\n\nReorderArrow.defaultProps = {\n  renderReorderIndicator: function renderReorderIndicator() {}\n};\n\nvar InovuaDataGridHeaderLayout = function (_Component) {\n  (0, _inherits2.default)(InovuaDataGridHeaderLayout, _Component);\n\n  var _super2 = _createSuper(InovuaDataGridHeaderLayout);\n\n  function InovuaDataGridHeaderLayout(props) {\n    var _this2;\n\n    (0, _classCallCheck2.default)(this, InovuaDataGridHeaderLayout);\n    _this2 = _super2.call(this, props);\n    _this2.state = {\n      draggingProps: null\n    };\n\n    _this2.refDragGroupItem = function (item) {\n      _this2.dragGroupItem = item;\n    };\n\n    _this2.refDragCell = function (cell) {\n      _this2.dragCell = cell;\n    };\n\n    _this2.refDragHeaderGroup = function (item) {\n      _this2.dragHeaderGroup = item;\n    };\n\n    _this2.groupToolbar = (0, _react.createRef)();\n\n    _this2.refHeader = function (h) {\n      _this2.headerNode = null;\n\n      if (h) {\n        _this2.headerNode = h.getDOMNode ? h.getDOMNode() : null;\n\n        if (!_this2.headerNode) {\n          throw 'Cannot find header node';\n        }\n\n        if (_isMobile.default) {\n          _this2.headerNode.addEventListener('touchmove', preventDefault);\n        }\n      } else {\n        if (_this2.headerNode && _isMobile.default) {\n          _this2.headerNode.removeEventListener('touchmove', preventDefault);\n        }\n\n        _this2.headerNode = null;\n      }\n\n      _this2.header = h;\n    };\n\n    _this2.headerWrapper = (0, _react.createRef)();\n\n    _this2.refReorderArrow = function (cmp) {\n      _this2.reorderArrow = cmp;\n    };\n\n    _this2.headerDomNode = (0, _react.createRef)();\n    _this2.lazyNotifyHeaderScrollLeftMax = (0, _debounce.default)(_this2.notifyHeaderScrollLeftMax, 150);\n    return _this2;\n  }\n\n  (0, _createClass2.default)(InovuaDataGridHeaderLayout, [{\n    key: \"notifyHeaderScrollLeftMax\",\n    value: function notifyHeaderScrollLeftMax(scrollLeftMax) {\n      if (this.header && this.props.lockedEndColumns) {\n        this.header.notifyScrollLeftMax(scrollLeftMax === undefined ? this.getScrollLeftMax() : scrollLeftMax);\n      }\n    }\n  }, {\n    key: \"onContainerScrollHorizontal\",\n    value: function onContainerScrollHorizontal(scrollLeft, scrollLeftMax) {\n      this.scrollLeft = scrollLeft;\n\n      if (this.header) {\n        this.header.setScrollLeft(scrollLeft, scrollLeftMax);\n        this.lazyNotifyHeaderScrollLeftMax();\n      }\n    }\n  }, {\n    key: \"setScrollLeft\",\n    value: function setScrollLeft(scrollLeft) {\n      this.props.setScrollLeft(scrollLeft);\n    }\n  }, {\n    key: \"getScrollLeft\",\n    value: function getScrollLeft() {\n      return this.scrollLeft || 0;\n    }\n  }, {\n    key: \"getScrollLeftMax\",\n    value: function getScrollLeftMax() {\n      return this.props.getScrollLeftMax();\n    }\n  }, {\n    key: \"setColumnRenderStartIndex\",\n    value: function setColumnRenderStartIndex(columnRenderStartIndex) {\n      if (this.header) {\n        this.header.setColumnRenderStartIndex(columnRenderStartIndex);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return _react.default.createElement(\"div\", {\n        ref: this.headerDomNode,\n        className: 'InovuaReactDataGrid__header-layout'\n      }, this.renderGroupToolbar(), this.renderHeaderWrapper(), this.renderDragCell(), this.renderDragGroupItem(), this.renderDragHeaderGroup(), this.renderReorderIndicator());\n    }\n  }, {\n    key: \"renderGroupToolbar\",\n    value: function renderGroupToolbar() {\n      var _this$props = this.props,\n          columnsMap = _this$props.columnsMap,\n          onGroupByChange = _this$props.onGroupByChange,\n          onHeaderSortClick = _this$props.onHeaderSortClick,\n          renderGroupItem = _this$props.renderGroupItem,\n          renderSortTool = _this$props.renderSortTool,\n          renderGroupToolbar = _this$props.renderGroupToolbar,\n          groupBy = _this$props.computedGroupBy,\n          disableGroupByToolbar = _this$props.disableGroupByToolbar,\n          i18n = _this$props.i18n,\n          rtl = _this$props.rtl,\n          theme = _this$props.theme;\n\n      if (!groupBy || !renderGroupToolbar) {\n        return null;\n      }\n\n      return renderGroupToolbar({\n        columnsMap: columnsMap,\n        groupBy: groupBy,\n        rtl: rtl,\n        theme: theme,\n        renderSortTool: renderSortTool,\n        onGroupByChange: onGroupByChange,\n        disableGroupByToolbar: disableGroupByToolbar,\n        renderGroupItem: renderGroupItem,\n        headerGroupPlaceholderText: i18n('dragHeaderToGroup'),\n        onItemMouseDown: this.onGroupItemMouseDown,\n        onSortClick: onHeaderSortClick,\n        ref: this.groupToolbar\n      });\n    }\n  }, {\n    key: \"renderHeaderWrapper\",\n    value: function renderHeaderWrapper() {\n      var props = this.props;\n      var computedShowHeader = props.computedShowHeader;\n\n      if (!computedShowHeader) {\n        return null;\n      }\n\n      var scrollLeft = (this.scrollLeft !== undefined ? this.scrollLeft : props.scrollLeft) || 0;\n      var groupBy = this.props.computedGroupBy && this.props.computedGroupBy.length ? this.props.computedGroupBy : null;\n      return _react.default.createElement(_HeaderWrapper.default, _objectSpread(_objectSpread({}, props), {}, {\n        groupBy: groupBy,\n        onHeaderGroupMouseDown: this.onHeaderGroupMouseDown,\n        onHeaderCellMouseDown: this.onHeaderCellMouseDown,\n        onHeaderCellTouchStart: this.onHeaderCellTouchStart,\n        ref: this.headerWrapper,\n        refHeader: this.refHeader,\n        scrollLeft: scrollLeft,\n        setScrollLeft: this.setScrollLeft\n      }));\n    }\n  }, {\n    key: \"renderDragCell\",\n    value: function renderDragCell() {\n      return _react.default.createElement(_DragCell.default, {\n        ref: this.refDragCell\n      });\n    }\n  }, {\n    key: \"renderDragGroupItem\",\n    value: function renderDragGroupItem() {\n      if (!this.props.renderDragGroupItem) {\n        return null;\n      }\n\n      return this.props.renderDragGroupItem(this.refDragGroupItem);\n    }\n  }, {\n    key: \"renderDragHeaderGroup\",\n    value: function renderDragHeaderGroup() {\n      if (!this.props.computedGroups) {\n        return;\n      }\n\n      return _react.default.createElement(_DragHeaderGroup.default, {\n        ref: this.refDragHeaderGroup\n      });\n    }\n  }, {\n    key: \"onGroupItemMouseDown\",\n    value: function onGroupItemMouseDown(column, index, event) {\n      this.onHeaderCellMouseDown(column, event, {\n        dragTarget: 'group',\n        dragIndex: index\n      });\n    }\n  }, {\n    key: \"getCellDOMNodeAt\",\n    value: function getCellDOMNodeAt(index) {\n      return this.header.getCellDOMNodeAt(index);\n    }\n  }, {\n    key: \"getHeader\",\n    value: function getHeader() {\n      return this.header;\n    }\n  }, {\n    key: \"onHeaderGroupMouseDown\",\n    value: function onHeaderGroupMouseDown(event, headerGroupProps, headerGroup) {\n      if (event.ctrlKey || event.metaKey) {\n        return;\n      }\n\n      if (this._dragIndex !== undefined) {\n        return;\n      }\n\n      if (headerGroupProps.group && headerGroupProps.group.draggable === false) {\n        return;\n      }\n\n      var dragTargetNode = headerGroup.domRef ? headerGroup.domRef.current : null;\n      var shouldStop = (0, _toConsumableArray2.default)(dragTargetNode.querySelectorAll('.InovuaReactDataGrid__column-header__filter-wrapper')).reduce(function (shouldStop, filterWrapperNode) {\n        if ((0, _contains.default)(filterWrapperNode, event.target) || filterWrapperNode === event.target) {\n          return true;\n        }\n\n        return shouldStop;\n      }, false);\n\n      if (shouldStop) {\n        return;\n      }\n\n      var groupColumns = headerGroupProps.columns.reduce(function (acc, colId) {\n        acc[colId] = true;\n        return acc;\n      }, {});\n      this.groupColumns = groupColumns;\n      var dragBoxes = this.header.getGroupsAndCells().filter(function (item) {\n        if (item === headerGroup) {\n          return true;\n        }\n\n        if (item.props.id in groupColumns) {\n          return false;\n        }\n\n        return !item.props.isHeaderGroup;\n      });\n      var dragIndex = dragBoxes.indexOf(headerGroup);\n      var dragTargetIndex = this.props.columnsMap[headerGroup.props.columns[0]].computedVisibleIndex;\n      var dragTargetDepth = headerGroup.props.depth;\n      var dragTargetLength = headerGroup.props.columns.length;\n      var parentsForColumns = getParentsForColumns(this.props.visibleColumns, this.props.computedGroupsMap, this.props.computedGroupsDepth);\n      this.maybeDragMouseDown(event, {\n        dragTarget: 'headergroup',\n        dragTargetIndex: dragTargetIndex,\n        dragTargetDepth: dragTargetDepth,\n        dragTargetLength: dragTargetLength,\n        parentsForColumns: parentsForColumns,\n        dragTargetNode: dragTargetNode,\n        dragIndex: dragIndex,\n        dragBoxes: dragBoxes,\n        allowTargetChange: false,\n        ranges: (0, _getRangesForBoxes.default)(dragBoxes, function (i) {\n          return i;\n        })\n      });\n    }\n  }, {\n    key: \"onHeaderCellTouchStart\",\n    value: function onHeaderCellTouchStart() {\n      return this.onHeaderCellMouseDown.apply(this, arguments);\n    }\n  }, {\n    key: \"onHeaderCellMouseDown\",\n    value: function onHeaderCellMouseDown(_ref3, event) {\n      var visibleIndex = _ref3.computedVisibleIndex;\n\n      var _ref4 = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {\n        dragTarget: 'header'\n      },\n          _ref4$dragTarget = _ref4.dragTarget,\n          dragTarget = _ref4$dragTarget === void 0 ? 'header' : _ref4$dragTarget,\n          dragIndex = _ref4.dragIndex;\n\n      if (this.props.reorderColumns === false) {\n        return;\n      }\n\n      if ((0, _isFocusable.default)(event.target)) {\n        return;\n      }\n\n      if (event.nativeEvent.which == 3 || event.metaKey || event.ctrlKey) {\n        return;\n      }\n\n      if (dragIndex === undefined) {\n        dragIndex = visibleIndex;\n      }\n\n      if (event.ctrlKey || event.metaKey) {\n        return;\n      }\n\n      var allowTargetChange = undefined;\n      var dragColumn;\n      var dragTargetNode = this.getCellDOMNodeAt(visibleIndex);\n\n      if (dragTarget == 'header') {\n        dragColumn = this.props.visibleColumns[visibleIndex];\n\n        if (!dragColumn || dragColumn.groupColumn || dragColumn.draggable === false) {\n          event.stopPropagation();\n          return;\n        }\n\n        if (this.props.computedGroupBy) {\n          if (this.props.computedGroupBy.indexOf(dragColumn.id) != -1 || this.props.computedGroupBy.indexOf(dragColumn.name) != -1) {\n            allowTargetChange = false;\n          }\n        }\n\n        if (dragColumn.draggable === false) {\n          return;\n        }\n\n        if (dragColumn.groupBy === false) {\n          allowTargetChange = false;\n        }\n      }\n\n      var dragTargetIndex = dragIndex;\n      var dragTargetDepth = dragColumn && dragColumn.group && this.props.computedGroupsMap && this.props.computedGroupsMap[dragColumn.group] ? this.props.computedGroupsMap[dragColumn.group].computedDepth + 1 : this.props.computedGroupsDepth + 1;\n      var parentsForColumns = getParentsForColumns(this.props.visibleColumns, this.props.computedGroupsMap, this.props.computedGroupsDepth);\n      this.maybeDragMouseDown(event, {\n        dragTarget: dragTarget,\n        dragIndex: dragIndex,\n        dragTargetNode: dragTargetNode,\n        parentsForColumns: parentsForColumns,\n        dragTargetIndex: dragTargetIndex,\n        dragTargetDepth: dragTargetDepth,\n        dragTargetLength: 1,\n        allowTargetChange: allowTargetChange\n      });\n    }\n  }, {\n    key: \"maybeDragMouseDown\",\n    value: function maybeDragMouseDown(event, _ref5) {\n      var _this3 = this;\n\n      var dragTarget = _ref5.dragTarget,\n          dragIndex = _ref5.dragIndex,\n          allowTargetChange = _ref5.allowTargetChange,\n          ranges = _ref5.ranges,\n          parentsForColumns = _ref5.parentsForColumns,\n          dragTargetIndex = _ref5.dragTargetIndex,\n          dragTargetDepth = _ref5.dragTargetDepth,\n          dragTargetNode = _ref5.dragTargetNode,\n          dragTargetLength = _ref5.dragTargetLength;\n\n      if (this.props.computedPivot) {\n        return;\n      }\n\n      this._dragIndex = dragIndex;\n\n      var _removeListeners;\n\n      var mouseMoveEventCount = 0;\n      var didSetupDrag = false;\n\n      var cleanup = function cleanup() {\n        delete _this3._dragIndex;\n\n        if (_removeListeners) {\n          _removeListeners();\n        }\n      };\n\n      var onMouseUp = cleanup;\n\n      var onMouseMove = function onMouseMove(event) {\n        if (didSetupDrag) {\n          return;\n        }\n\n        mouseMoveEventCount++;\n\n        if (mouseMoveEventCount > 1) {\n          didSetupDrag = true;\n\n          _removeListeners();\n\n          _this3.setupDrag({\n            dragTarget: dragTarget,\n            dragIndex: dragIndex,\n            allowTargetChange: allowTargetChange,\n            ranges: ranges,\n            parentsForColumns: parentsForColumns,\n            dragTargetIndex: dragTargetIndex,\n            dragTargetDepth: dragTargetDepth,\n            dragTargetLength: dragTargetLength,\n            dragTargetNode: dragTargetNode\n          }, event);\n        }\n      };\n\n      var mouseup = _isMobile.default ? 'touchend' : 'mouseup';\n      var mousemove = _isMobile.default ? 'touchmove' : 'mousemove';\n\n      _removeListeners = function removeListeners() {\n        _removeListeners = null;\n        globalObject.removeEventListener(mouseup, onMouseUp, false);\n        globalObject.removeEventListener(mousemove, onMouseMove, false);\n      };\n\n      if (_isMobile.default) {\n        setTimeout(function () {\n          onMouseUp();\n        }, 350);\n      }\n\n      globalObject.addEventListener(mouseup, onMouseUp, false);\n      globalObject.addEventListener(mousemove, onMouseMove, false);\n    }\n  }, {\n    key: \"renderReorderIndicator\",\n    value: function renderReorderIndicator() {\n      var size = this.props.reorderProxySize;\n      return _react.default.createElement(ReorderArrow, {\n        ref: this.refReorderArrow,\n        size: size,\n        rtl: this.props.rtl,\n        renderReorderIndicator: this.props.renderReorderIndicator\n      });\n    }\n  }, {\n    key: \"setReorderArrowAt\",\n    value: function setReorderArrowAt(index, ranges, target) {\n      var offset = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n      var visible = arguments.length > 4 ? arguments[4] : undefined;\n      visible = visible !== undefined ? visible : index != DRAG_INFO.dragIndex || target != DRAG_INFO.dragTarget;\n\n      if (offset) {\n        visible = true;\n      }\n\n      var rtl = this.props.rtl;\n      this.reorderArrow.setVisible(visible);\n      var last = index == ranges.length;\n      var box = ranges[index];\n      var _DRAG_INFO = DRAG_INFO,\n          headerRegion = _DRAG_INFO.headerRegion,\n          initialScrollLeft = _DRAG_INFO.initialScrollLeft;\n\n      if (!box && last) {\n        var _box;\n\n        var lastBox = ranges[ranges.length - 1] || {\n          left: headerRegion.left,\n          right: headerRegion.left\n        };\n        box = (_box = {}, (0, _defineProperty2.default)(_box, rtl ? 'right' : 'left', rtl ? lastBox.left : lastBox.right), (0, _defineProperty2.default)(_box, \"computedLocked\", lastBox.computedLocked), _box);\n      }\n\n      box = box || (rtl ? {\n        right: 0\n      } : {\n        left: 0\n      });\n      var boxPos = rtl ? box.right : box.left;\n\n      if (rtl && this.props.nativeScroll && this.props.scrollbars.vertical) {\n        boxPos -= (0, _getScrollbarWidth.default)();\n      }\n\n      return this.setReorderArrowPosition(rtl ? -boxPos + headerRegion.right - offset : boxPos - headerRegion.left + offset, target);\n    }\n  }, {\n    key: \"setReorderArrowPosition\",\n    value: function setReorderArrowPosition(pos, target) {\n      var rtl = this.props.rtl;\n      this.reorderArrowPosition = this.reorderArrowPosition || {};\n      (0, _assignDefined2.default)(this.reorderArrowPosition, (0, _defineProperty2.default)({}, rtl ? 'right' : 'left', pos));\n      this.reorderArrow.set(_objectSpread((0, _defineProperty2.default)({\n        target: target\n      }, rtl ? 'right' : 'left', rtl ? this.reorderArrowPosition.right : this.reorderArrowPosition.left), DRAG_INFO.reorderProxyPosition[target]));\n      return this;\n    }\n  }, {\n    key: \"setReorderArrowVisible\",\n    value: function setReorderArrowVisible(visible) {\n      this.reorderArrow.setVisible(visible);\n      return this;\n    }\n  }, {\n    key: \"getGroupToolbar\",\n    value: function getGroupToolbar() {\n      return this.groupToolbar.current;\n    }\n  }, {\n    key: \"getGroupByItems\",\n    value: function getGroupByItems() {\n      if (!this.groupToolbar.current) {\n        return null;\n      }\n\n      return this.groupToolbar.current.getSortedItemsInfo();\n    }\n  }, {\n    key: \"getHeaderCells\",\n    value: function getHeaderCells() {\n      return this.header.getCells();\n    }\n  }, {\n    key: \"getBoxesFor\",\n    value: function getBoxesFor(target) {\n      if (target == 'header') {\n        return this.header.getCells();\n      }\n\n      if (target == 'group' && this.groupToolbar.current) {\n        return this.groupToolbar.current.getCells();\n      }\n\n      if (target == 'headergroup') {\n        return this.header.getGroupsAndCells();\n      }\n\n      return [];\n    }\n  }, {\n    key: \"getDragBoxInstance\",\n    value: function getDragBoxInstance(dragIndex, dragTarget, dragTargetDepth, dragTargetLength) {\n      if (dragTarget === 'group') {\n        return this.getGroupToolbar().getCells()[dragIndex];\n      }\n\n      var dragCell = this.getHeaderCells()[dragIndex];\n      var dragBox = dragCell;\n\n      if (dragTargetLength) {\n        var cellProps = dragCell.getProps();\n\n        while (cellProps.depth > dragTargetDepth) {\n          if (cellProps.parent) {\n            dragBox = cellProps.parent;\n            cellProps = dragBox.props;\n          } else {\n            break;\n          }\n        }\n      }\n\n      return dragBox;\n    }\n  }, {\n    key: \"setupDrag\",\n    value: function setupDrag(_ref6, event) {\n      var _DRAG_INFO2;\n\n      var dragTarget = _ref6.dragTarget,\n          dragIndex = _ref6.dragIndex,\n          _ref6$allowTargetChan = _ref6.allowTargetChange,\n          allowTargetChange = _ref6$allowTargetChan === void 0 ? true : _ref6$allowTargetChan,\n          parentsForColumns = _ref6.parentsForColumns,\n          dragTargetIndex = _ref6.dragTargetIndex,\n          dragTargetDepth = _ref6.dragTargetDepth,\n          dragTargetLength = _ref6.dragTargetLength;\n      var columns = this.props.visibleColumns;\n      var rtl = this.props.rtl;\n\n      var headerRegion = _region.default.from(this.headerDomNode.current);\n\n      var dragBox = this.getDragBoxInstance(dragIndex, dragTarget, dragTargetDepth, dragTargetLength);\n      var initialScrollLeft = this.getScrollLeft();\n      var dragBoxProps = dragBox.getProps ? dragBox.getProps() : dragBox.props;\n      var rtlOffset = Math.max(this.props.totalComputedWidth - this.props.size.width, 0);\n      var columnRanges = (0, _getRangesForColumns.default)(columns, {\n        rtl: rtl,\n        rtlOffset: rtlOffset,\n        initialOffset: rtl ? headerRegion.right : headerRegion.left,\n        headerRegion: headerRegion,\n        initialScrollLeft: initialScrollLeft,\n        availableWidth: Math.min(this.props.availableWidth, this.props.totalComputedWidth),\n        totalLockedEndWidth: this.props.totalLockedEndWidth\n      });\n      var groupByRanges = this.props.computedGroupBy && this.props.computedGroupBy.length ? (0, _getRangesForBoxes.default)(this.getGroupToolbar().getCells()) : [];\n      var dragProxy = dragTarget == 'header' ? this.dragCell : dragTarget == 'group' ? this.dragGroupItem : this.dragHeaderGroup;\n      var dragColumn = dragTarget === 'group' ? dragBoxProps.column : columns[dragIndex];\n      var headerDragColumn = dragTarget == 'header' ? dragColumn : null;\n      var columnId = dragTarget == 'header' ? headerDragColumn.id : dragTarget == 'group' ? dragColumn.id : null;\n      var dragBoxNode = dragBox.domRef ? dragBox.domRef.current : null;\n      var dragBoxInitialRegion = dragBox && dragBox.getProxyRegion ? dragBox.getProxyRegion() : _region.default.from(dragBoxNode);\n\n      if (_DragCell.MAX_WIDTH && dragBoxInitialRegion.getWidth() > _DragCell.MAX_WIDTH) {\n        dragBoxInitialRegion.setWidth(_DragCell.MAX_WIDTH);\n      }\n\n      if (_region.default.from(dragBoxNode).getWidth() > headerRegion.getWidth() / 2) {\n        if (rtl) {\n          dragBoxInitialRegion.shift({\n            right: event.pageX - dragBoxInitialRegion.right - this.props.columnReorderScrollByAmount\n          });\n        } else {\n          dragBoxInitialRegion.shift({\n            left: event.pageX - dragBoxInitialRegion.left - this.props.columnReorderScrollByAmount\n          });\n        }\n      }\n\n      var dragBoxOffsets = (0, _defineProperty2.default)({\n        top: headerRegion.top\n      }, rtl ? 'right' : 'left', rtl ? headerRegion.right : headerRegion.left);\n\n      var extendedDragBoxProps = _objectSpread({}, dragBoxProps);\n\n      if (this.props.renderColumnReorderProxy) {\n        Object.assign(extendedDragBoxProps, {\n          renderColumnReorderProxy: this.props.renderColumnReorderProxy\n        });\n      }\n\n      dragProxy.setProps(extendedDragBoxProps);\n      var dragProxyPosition = (0, _defineProperty2.default)({\n        top: dragBoxInitialRegion.top - dragBoxOffsets.top\n      }, rtl ? 'right' : 'left', rtl ? dragBoxOffsets.right - dragBoxInitialRegion.right : dragBoxInitialRegion.left - dragBoxOffsets.left);\n      dragProxy.setHeight(dragBoxInitialRegion.height);\n      dragProxy.setWidth(dragBoxInitialRegion.width);\n      dragProxy.setTop(dragProxyPosition.top);\n\n      if (rtl) {\n        dragProxy.setRight(dragProxyPosition.right);\n      } else {\n        dragProxy.setLeft(dragProxyPosition.left);\n      }\n\n      this.setReorderArrowVisible(headerDragColumn ? headerDragColumn.draggable !== false : true);\n      var maxHeaderIndex = columns.length - (0, _getUndraggableSuccessiveCount.default)((0, _toConsumableArray2.default)(columns).reverse());\n      var minHeaderIndex = (0, _getUndraggableSuccessiveCount.default)(columns);\n      var validDropPositions = columns.reduce(function (acc, col, i) {\n        acc[i] = true;\n        return acc;\n      }, {});\n      validDropPositions[columns.length] = true;\n\n      if (this.props.groups && this.props.groups.length && !this.props.allowGroupSplitOnReorder) {\n        validDropPositions = getValidDropPositions({\n          dragTargetDepth: dragTargetDepth,\n          dragTargetIndex: dragTargetIndex,\n          dragTargetLength: dragTargetLength,\n          parentsForColumns: parentsForColumns,\n          columns: columns,\n          allowGroupSplitOnReorder: this.props.allowGroupSplitOnReorder,\n          maxDepth: this.props.computedGroupsDepth + 1\n        });\n      }\n\n      if (validDropPositions && !validDropPositions[dragIndex] && dragTarget != 'group') {\n        validDropPositions[dragIndex] = true;\n      }\n\n      var wrapperNode = this.headerDomNode ? this.headerDomNode.current : null;\n      var filterRowHeight = 0;\n\n      if (this.props.computedFilterable) {\n        var filterWrapperNode = wrapperNode.querySelector('.InovuaReactDataGrid__column-header__filter-wrapper');\n\n        if (filterWrapperNode) {\n          filterRowHeight = filterWrapperNode.offsetHeight;\n        }\n      }\n\n      DRAG_INFO = (_DRAG_INFO2 = {\n        allowTargetChange: allowTargetChange,\n        columnId: columnId,\n        headerRegion: headerRegion,\n        headerDragColumn: headerDragColumn,\n        minHeaderIndex: minHeaderIndex,\n        maxHeaderIndex: maxHeaderIndex,\n        dragColumn: dragColumn,\n        dragColumnsIds: dragTarget == 'headergroup' ? dragBox.props.columns : null,\n        dragBox: dragBox,\n        dragBoxInitialRegion: dragBoxInitialRegion,\n        dragBoxRegion: dragBoxInitialRegion.clone(),\n        dragBoxProps: dragBoxProps,\n        dragBoxOffsets: dragBoxOffsets,\n        dragProxy: dragProxy,\n        dragProxyInitialPosition: dragProxyPosition,\n        dragTarget: dragTarget,\n        dropTarget: dragTarget,\n        dragIndex: dragIndex,\n        columnRanges: columnRanges,\n        groupByRanges: groupByRanges,\n        parentsForColumns: parentsForColumns,\n        dragTargetIndex: dragTargetIndex,\n        dragTargetDepth: dragTargetDepth,\n        dragTargetLength: dragTargetLength,\n        scrollLeftMax: this.props.getScrollLeftMax(),\n        initialScrollLeft: initialScrollLeft\n      }, (0, _defineProperty2.default)(_DRAG_INFO2, \"headerRegion\", headerRegion), (0, _defineProperty2.default)(_DRAG_INFO2, \"validDropPositions\", validDropPositions), _DRAG_INFO2);\n      var groupToolbarNode = this.groupToolbar.current ? this.groupToolbar.current.domRef ? this.groupToolbar.current.domRef.current : null : null;\n      var headerGroupTargetNode = wrapperNode;\n      var groupTargetNode = groupToolbarNode || this.headerDomNode.current;\n      var groupComputedStyle = getComputedStyle(groupTargetNode);\n      DRAG_INFO.reorderProxyPosition = {\n        group: {\n          top: parseInt(groupComputedStyle.paddingTop),\n          bottom: groupTargetNode.offsetHeight - parseInt(groupComputedStyle.paddingBottom)\n        },\n        header: {\n          top: this.props.computedGroupBy ? groupTargetNode.offsetHeight : 0,\n          bottom: headerGroupTargetNode.offsetHeight - filterRowHeight\n        },\n        headergroup: {\n          top: this.props.computedGroupBy ? groupTargetNode.offsetHeight : 0,\n          bottom: headerGroupTargetNode.offsetHeight - filterRowHeight\n        }\n      };\n      this.setReorderArrowAt(dragIndex, dragTarget === 'group' ? groupByRanges : columnRanges, dragTarget);\n      this.setReorderArrowPosition(undefined, dragTarget);\n      dragProxy.setDragging(true);\n      this.props.coverHandleRef.current.setActive(true);\n      this.props.coverHandleRef.current.setCursor('grabbing');\n      var headerNode = this.headerDomNode ? this.headerDomNode.current : null;\n      (0, _setupColumnDrag.default)({\n        constrainTo: this.props.constrainReorder ? _region.default.from(headerNode.parentNode) : undefined,\n        region: dragBoxInitialRegion\n      }, {\n        onDrag: this.onHeaderCellDrag,\n        onDrop: this.onHeaderCellDrop\n      }, event);\n    }\n  }, {\n    key: \"onHeaderCellDrop\",\n    value: function onHeaderCellDrop() {\n      var _this4 = this;\n\n      this.props.coverHandleRef.current.setActive(false);\n      delete this._dragIndex;\n      var dropIndex = this.dropIndex,\n          props = this.props;\n\n      if (dropIndex === undefined || !DRAG_INFO) {\n        if (DRAG_INFO) {\n          DRAG_INFO.dragProxy.setDragging(false);\n        }\n\n        this.setReorderArrowVisible(false);\n        DRAG_INFO = null;\n        return;\n      }\n\n      var _DRAG_INFO3 = DRAG_INFO,\n          dragColumn = _DRAG_INFO3.dragColumn,\n          columnId = _DRAG_INFO3.columnId,\n          dragColumnsIds = _DRAG_INFO3.dragColumnsIds,\n          dragTarget = _DRAG_INFO3.dragTarget,\n          dropTarget = _DRAG_INFO3.dropTarget,\n          dragProxy = _DRAG_INFO3.dragProxy,\n          newLocked = _DRAG_INFO3.newLocked;\n      var _DRAG_INFO4 = DRAG_INFO,\n          dragIndex = _DRAG_INFO4.dragIndex;\n      DRAG_INFO = null;\n      this.setReorderArrowVisible(false);\n      dragProxy.setDragging(false);\n      var columns = this.props.visibleColumns;\n      var currentLocked = columns[dragIndex].computedLocked;\n\n      if (dropIndex == dragIndex && newLocked === currentLocked && dragTarget == dropTarget) {\n        return;\n      }\n\n      if (this.props.virtualizeColumns) {\n        setTimeout(function () {\n          _this4.header.updateColumns();\n        }, 10);\n      }\n\n      if (dragTarget == 'headergroup') {\n        if (dropIndex == dragIndex && dragTarget == dropTarget) {\n          return;\n        }\n\n        if (columns[dropIndex]) {\n          this.moveColumnsBeforeIndex(dragColumnsIds, columns[dropIndex].computedVisibleIndex, newLocked);\n        } else if (dropIndex == columns.length) {\n          var col = columns[columns.length - 1];\n\n          if (col) {\n            this.moveColumnsBeforeIndex(dragColumnsIds, col.computedVisibleIndex + 1, newLocked);\n          }\n        }\n\n        return;\n      }\n\n      var visibleColumns = props.visibleColumns,\n          groupBy = props.computedGroupBy;\n\n      if (dropTarget == dragTarget) {\n        if (dragTarget == 'group') {\n          this.setGroupBy((0, _moveXBeforeY.default)(groupBy, dragIndex, dropIndex));\n        }\n\n        if (dragTarget == 'header') {\n          this.moveColumnsBeforeIndex([columnId], dropIndex, newLocked);\n        }\n      }\n\n      if (dragTarget == 'header' && dropTarget == 'group') {\n        var groupByColumn = visibleColumns[dragIndex];\n        var newGroupBy = [].concat(groupBy);\n        newGroupBy.splice(dropIndex, 0, groupByColumn.id);\n        this.setGroupBy(newGroupBy);\n      }\n\n      if (dragTarget == 'group' && dropTarget == 'header') {\n        this.ungroupColumnToIndex(columnId, dropIndex);\n      }\n    }\n  }, {\n    key: \"ungroupColumnToIndex\",\n    value: function ungroupColumnToIndex(columnId, dropIndex) {\n      var props = this.props;\n      var allColumns = props.allColumns,\n          visibleColumns = props.visibleColumns;\n      var dragColumn = allColumns.filter(function (c) {\n        return c.id === columnId;\n      })[0];\n      var newGroupBy = [].concat(this.props.computedGroupBy).filter(function (g) {\n        return g != columnId;\n      });\n      var columnAtDropIndex = visibleColumns[dropIndex];\n\n      if (columnAtDropIndex && columnAtDropIndex.id === columnId) {\n        this.setGroupBy(newGroupBy);\n        return;\n      }\n\n      var order = getColumnOrder(props, function (c) {\n        return c.id !== columnId;\n      });\n      var insertIndex = columnAtDropIndex ? order.indexOf(columnAtDropIndex.id) : order.length;\n      order.splice(insertIndex, 0, columnId);\n      var columnAtDropIndexOrLast = columnAtDropIndex || visibleColumns[visibleColumns.length - 1];\n\n      if (columnAtDropIndexOrLast.computedLocked != dragColumn.computedLocked) {\n        this.props.setColumnLocked(columnId, columnAtDropIndexOrLast.computedLocked);\n      }\n\n      this.setGroupBy(newGroupBy);\n      this.setColumnOrder(order);\n    }\n  }, {\n    key: \"moveColumnsBeforeIndex\",\n    value: function moveColumnsBeforeIndex(columnsIds, dropIndex, newLocked) {\n      var _this5 = this;\n\n      var props = this.props;\n      var visibleColumns = props.visibleColumns,\n          columnVisibilityMap = props.columnVisibilityMap,\n          allowGroupSplitOnReorder = props.allowGroupSplitOnReorder;\n      var columnOrder = getColumnOrder(props);\n      var columns = visibleColumns.filter(function (col) {\n        return columnsIds.indexOf(col.id) != -1;\n      });\n      var dragColumnsIndexesInAllColumns = columnsIds.map(function (columnId) {\n        return columnOrder.indexOf(columnId);\n      });\n      var dropBeforeIndexInAllColumns = visibleColumns[dropIndex] ? columnOrder.indexOf(visibleColumns[dropIndex].id) : columnOrder.length;\n      var firstDragIndex = dragColumnsIndexesInAllColumns[0];\n\n      if (!allowGroupSplitOnReorder && firstDragIndex < dropBeforeIndexInAllColumns) {\n        while (true) {\n          var columnRightBefore = columnOrder[dropBeforeIndexInAllColumns - 1];\n\n          if (columnRightBefore && columnVisibilityMap[columnRightBefore] === false) {\n            dropBeforeIndexInAllColumns--;\n            continue;\n          }\n\n          break;\n        }\n      }\n\n      var targetColumn = visibleColumns[dropIndex] || visibleColumns[visibleColumns.length - 1];\n      columns.forEach(function (col) {\n        if (newLocked != col.computedLocked) {\n          _this5.props.setColumnLocked(col.id, newLocked);\n        }\n      });\n      var newColumnOrder = (0, _moveXBeforeY.default)(columnOrder, dragColumnsIndexesInAllColumns, dropBeforeIndexInAllColumns);\n      this.setColumnOrder(newColumnOrder);\n    }\n  }, {\n    key: \"onHeaderCellDrag\",\n    value: function onHeaderCellDrag(_ref7) {\n      var diffLeft = _ref7.left,\n          diffTop = _ref7.top;\n\n      if (!DRAG_INFO) {\n        return;\n      }\n\n      var _DRAG_INFO5 = DRAG_INFO,\n          allowTargetChange = _DRAG_INFO5.allowTargetChange,\n          dragTarget = _DRAG_INFO5.dragTarget,\n          dragIndex = _DRAG_INFO5.dragIndex,\n          dragProxy = _DRAG_INFO5.dragProxy,\n          dragColumn = _DRAG_INFO5.dragColumn,\n          dragBoxInitialRegion = _DRAG_INFO5.dragBoxInitialRegion,\n          dragBoxOffsets = _DRAG_INFO5.dragBoxOffsets,\n          dragBoxRegion = _DRAG_INFO5.dragBoxRegion,\n          groupByRanges = _DRAG_INFO5.groupByRanges,\n          theRanges = _DRAG_INFO5.columnRanges,\n          headerRegion = _DRAG_INFO5.headerRegion,\n          scrollLeftMax = _DRAG_INFO5.scrollLeftMax,\n          initialScrollLeft = _DRAG_INFO5.initialScrollLeft,\n          validDropPositions = _DRAG_INFO5.validDropPositions;\n      dragBoxRegion.set({\n        left: dragBoxInitialRegion.left,\n        top: dragBoxInitialRegion.top,\n        bottom: dragBoxInitialRegion.bottom,\n        right: dragBoxInitialRegion.right\n      });\n      var _DRAG_INFO6 = DRAG_INFO,\n          dropTarget = _DRAG_INFO6.dropTarget;\n      var _this$props2 = this.props,\n          columnReorderScrollByAmount = _this$props2.columnReorderScrollByAmount,\n          rtl = _this$props2.rtl;\n      var scrollLeft = this.getScrollLeft();\n      var scrollDiff = scrollLeft - initialScrollLeft;\n      var initialDiffLeft = diffLeft;\n      dragBoxRegion.shift({\n        top: diffTop,\n        left: diffLeft\n      });\n      diffLeft += scrollDiff;\n      var minScrollLeft = Math.max(headerRegion.left, 0);\n      var maxScrollRight = headerRegion.right;\n      var groupToolbarNode = this.groupToolbar && this.groupToolbar.current && this.groupToolbar.current.domRef ? this.groupToolbar.current.domRef.current : null;\n\n      if (this.groupToolbar.current && allowTargetChange) {\n        var groupToolbarRegion = _region.default.from(groupToolbarNode);\n\n        if (dragBoxRegion.top + dragBoxRegion.height / 2 < groupToolbarRegion.bottom) {\n          if (dropTarget !== 'group' && dragColumn.groupBy !== false) {\n            dropTarget = DRAG_INFO.dropTarget = 'group';\n          }\n        } else {\n          if (dropTarget != 'header') {\n            dropTarget = DRAG_INFO.dropTarget = 'header';\n          }\n        }\n      }\n\n      var scrollAdjust = 0;\n      var dragProxyAdjust = 0;\n      var dragComputedLocked = this.props.visibleColumns[dragIndex].computedLocked;\n\n      if (dropTarget == 'header' || dropTarget == 'headergroup') {\n        if (dragBoxInitialRegion.left + initialDiffLeft - this.props.totalLockedStartWidth < minScrollLeft + SCROLL_MARGIN && initialDiffLeft < 0) {\n          scrollAdjust = -columnReorderScrollByAmount;\n        } else if (dragBoxInitialRegion.right + initialDiffLeft > maxScrollRight - SCROLL_MARGIN - this.props.totalLockedEndWidth && initialDiffLeft > 0) {\n          scrollAdjust = columnReorderScrollByAmount;\n        }\n\n        if (scrollAdjust) {\n          if (scrollLeft + scrollAdjust < 0) {\n            scrollAdjust = -scrollLeft;\n          }\n\n          if (scrollLeft + scrollAdjust > scrollLeftMax) {\n            scrollAdjust = scrollLeftMax - scrollLeft;\n          }\n\n          if (scrollAdjust) {\n            this.setScrollLeft(scrollLeft + scrollAdjust);\n            dragProxyAdjust = scrollAdjust;\n          }\n        }\n      }\n\n      if (rtl) {\n        dragProxy.setRight(dragBoxOffsets.right + -initialDiffLeft - dragBoxInitialRegion.right - dragProxyAdjust);\n      } else {\n        dragProxy.setLeft(dragBoxInitialRegion.left + initialDiffLeft - dragBoxOffsets.left - dragProxyAdjust);\n      }\n\n      dragProxy.setTop(dragBoxRegion.top - dragBoxOffsets.top);\n      var dir = dropTarget == 'group' && dragTarget == 'group' ? initialDiffLeft < 0 ? -1 : 1 : dragTarget != dropTarget || diffLeft < 0 ? -1 : 1;\n\n      if (dragComputedLocked) {\n        dir = initialDiffLeft < 0 ? -1 : 1;\n      }\n\n      if (rtl) {\n        dir *= -1;\n      }\n\n      var mapRange = function mapRange(r) {\n        if (!r.computedLocked) {\n          return _objectSpread(_objectSpread({}, r), {}, {\n            left: r.left - scrollDiff,\n            right: r.right - scrollDiff\n          });\n        }\n\n        return r;\n      };\n\n      var currentRanges = dropTarget === 'group' ? groupByRanges : theRanges;\n      var ranges = currentRanges.map(mapRange);\n      var compareRanges = currentRanges.map(mapRange);\n      var dragMinIndex = dropTarget == 'header' ? DRAG_INFO.minHeaderIndex : undefined;\n      var dragMaxIndex = dropTarget == 'header' ? DRAG_INFO.maxHeaderIndex : undefined;\n      var dropIndex;\n\n      var _getDropIndex = (0, _getDropIndex2.default)({\n        dir: dir,\n        rtl: rtl,\n        dragMinIndex: dragMinIndex,\n        dragMaxIndex: dragMaxIndex,\n        dragTarget: dragTarget,\n        dropTarget: dropTarget,\n        dragRange: _objectSpread(_objectSpread({}, ranges[dragIndex]), {}, {\n          left: dragBoxRegion.left,\n          right: dragBoxRegion.right,\n          index: dragIndex\n        }),\n        dragIndex: dragIndex,\n        ranges: compareRanges,\n        validDropPositions: dropTarget === dragTarget ? validDropPositions : undefined\n      }),\n          newDropIndex = _getDropIndex.index,\n          locked = _getDropIndex.locked;\n\n      DRAG_INFO.newLocked = locked;\n\n      if (newDropIndex != undefined) {\n        dropIndex = newDropIndex;\n      }\n\n      var offset = 0;\n      var visible;\n\n      if (locked === 'start' && newDropIndex === this.props.firstUnlockedIndex) {\n        offset = (rtl ? -1 : 1) * -11;\n      }\n\n      if (newDropIndex === this.props.firstLockedEndIndex && dragIndex !== this.props.firstLockedEndIndex) {\n        if (locked === 'end') {\n          offset = (rtl ? -1 : 1) * 4;\n        } else if (!locked) {\n          offset = (rtl ? -1 : 1) * -6;\n        }\n      }\n\n      if (newDropIndex === this.props.visibleColumns.length) {\n        offset = rtl ? 6 : -6;\n      }\n\n      if (locked == null && dragComputedLocked === 'end' && newDropIndex === this.props.firstLockedEndIndex) {\n        visible = true;\n      }\n\n      this.dropIndex = dropIndex;\n      this.setReorderArrowVisible(true);\n      this.setReorderArrowPosition(undefined, dropTarget);\n      this.setReorderArrowAt(dropIndex, compareRanges, dropTarget, offset, visible);\n    }\n  }, {\n    key: \"setColumnOrder\",\n    value: function setColumnOrder(newColumnOrder) {\n      var columnOrder = getColumnOrder(this.props);\n\n      if (this.props.setColumnOrder && JSON.stringify(columnOrder) !== JSON.stringify(newColumnOrder)) {\n        this.props.setColumnOrder(newColumnOrder);\n      }\n    }\n  }, {\n    key: \"setGroupBy\",\n    value: function setGroupBy(groupBy) {\n      if (this.props.onGroupByChange && JSON.stringify(groupBy) !== JSON.stringify(this.props.computedGroupBy)) {\n        this.props.onGroupByChange(groupBy);\n      }\n    }\n  }, {\n    key: \"insertGroupBy\",\n    value: function insertGroupBy(at, column) {\n      var props = this.props;\n      var order = (0, _toConsumableArray2.default)(props.computedGroupBy);\n      order.splice(at, 0, column.id);\n      this.setGroupBy(order);\n    }\n  }]);\n  return InovuaDataGridHeaderLayout;\n}(_reactClass.default);\n\nexports.default = InovuaDataGridHeaderLayout;\nInovuaDataGridHeaderLayout.propTypes = {\n  i18n: _propTypes.default.func.isRequired,\n  renderGroupToolbar: _propTypes.default.func,\n  renderDragGroupItem: _propTypes.default.func,\n  getScrollLeftMax: _propTypes.default.func.isRequired,\n  setScrollLeft: _propTypes.default.func.isRequired,\n  renderColumnReorderProxy: _propTypes.default.func\n};"]},"metadata":{},"sourceType":"script"}