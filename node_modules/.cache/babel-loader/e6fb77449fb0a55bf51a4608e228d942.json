{"ast":null,"code":"/**\n * Copyright © INOVUA TRADING.\n *\n * This source code is licensed under the Commercial License found in the\n * LICENSE file in the root directory of this source tree.\n */\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = require(\"react\");\n\nvar _useDataSource = require(\"@inovua/reactdatagrid-community/hooks/useDataSource\");\n\nvar hook = function hook(props, computedProps, computedPropsRef) {\n  var rafId = (0, _react.useRef)(null);\n  var hasVerticalScrollbar = (0, _react.useCallback)(function () {\n    var computedProps = computedPropsRef.current;\n\n    if (!computedProps) {\n      return false;\n    }\n\n    var scrollContainer = computedProps.getVirtualList().scrollContainer;\n    var result = scrollContainer ? scrollContainer.hasVerticalScrollbar() : false;\n    return result;\n  }, []);\n\n  var loadNextPageWhileNoScrollbar = function loadNextPageWhileNoScrollbar() {\n    var computedProps = computedPropsRef.current;\n\n    if (!computedProps) {\n      return;\n    }\n\n    var props = computedProps.initialProps;\n\n    if (Array.isArray(props.dataSource)) {\n      return;\n    }\n\n    if ((0, _useDataSource.isLivePagination)(props) && computedProps.hasNextPage() && !hasVerticalScrollbar()) {\n      var loadNextDelay = computedProps.livePaginationLoadNextDelay;\n\n      if (loadNextDelay === false) {\n        if (computedProps.dataPromiseRef.current) {\n          computedProps.dataPromiseRef.current.then(function () {\n            if (!hasVerticalScrollbar()) {\n              computedProps.gotoNextPage({\n                append: true\n              });\n            }\n          });\n        }\n\n        return;\n      }\n\n      var delay = loadNextDelay === true ? computedProps.checkResizeDelay : loadNextDelay;\n\n      if (typeof delay == 'number') {\n        setTimeout(function () {\n          if (Array.isArray(computedPropsRef.current.dataSource)) {\n            return;\n          }\n\n          if (computedProps.dataPromiseRef.current) {\n            computedProps.dataPromiseRef.current.then(function () {\n              if (!hasVerticalScrollbar()) {\n                computedProps.gotoNextPage({\n                  append: true\n                });\n              }\n            });\n          }\n        }, delay);\n      }\n    }\n  };\n\n  (0, _react.useEffect)(function () {\n    if (!computedPropsRef.current.computedLivePagination) {\n      return;\n    }\n\n    if (!computedPropsRef.current.computedLoading) {\n      if (rafId.current) {\n        cancelAnimationFrame(rafId.current);\n        rafId.current = null;\n      }\n\n      rafId.current = requestAnimationFrame(function () {\n        var lastId = rafId.current = requestAnimationFrame(function () {\n          if (!computedPropsRef.current.computedLoading && rafId.current === lastId) {\n            loadNextPageWhileNoScrollbar();\n          }\n        });\n      });\n    }\n  });\n  return {};\n};\n\nvar _default = {\n  name: 'live-pagination',\n  hook: hook,\n  defaultProps: function defaultProps() {\n    return {};\n  }\n};\nexports.default = _default;","map":{"version":3,"sources":["/Users/sungjaejoo/Desktop/리액트/인터로거/ILP-main/node_modules/@inovua/reactdatagrid-enterprise/plugins/live-pagination/index.js"],"names":["Object","defineProperty","exports","value","default","_react","require","_useDataSource","hook","props","computedProps","computedPropsRef","rafId","useRef","hasVerticalScrollbar","useCallback","current","scrollContainer","getVirtualList","result","loadNextPageWhileNoScrollbar","initialProps","Array","isArray","dataSource","isLivePagination","hasNextPage","loadNextDelay","livePaginationLoadNextDelay","dataPromiseRef","then","gotoNextPage","append","delay","checkResizeDelay","setTimeout","useEffect","computedLivePagination","computedLoading","cancelAnimationFrame","requestAnimationFrame","lastId","_default","name","defaultProps"],"mappings":"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","sourcesContent":["/**\n * Copyright © INOVUA TRADING.\n *\n * This source code is licensed under the Commercial License found in the\n * LICENSE file in the root directory of this source tree.\n */\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = require(\"react\");\n\nvar _useDataSource = require(\"@inovua/reactdatagrid-community/hooks/useDataSource\");\n\nvar hook = function hook(props, computedProps, computedPropsRef) {\n  var rafId = (0, _react.useRef)(null);\n  var hasVerticalScrollbar = (0, _react.useCallback)(function () {\n    var computedProps = computedPropsRef.current;\n\n    if (!computedProps) {\n      return false;\n    }\n\n    var scrollContainer = computedProps.getVirtualList().scrollContainer;\n    var result = scrollContainer ? scrollContainer.hasVerticalScrollbar() : false;\n    return result;\n  }, []);\n\n  var loadNextPageWhileNoScrollbar = function loadNextPageWhileNoScrollbar() {\n    var computedProps = computedPropsRef.current;\n\n    if (!computedProps) {\n      return;\n    }\n\n    var props = computedProps.initialProps;\n\n    if (Array.isArray(props.dataSource)) {\n      return;\n    }\n\n    if ((0, _useDataSource.isLivePagination)(props) && computedProps.hasNextPage() && !hasVerticalScrollbar()) {\n      var loadNextDelay = computedProps.livePaginationLoadNextDelay;\n\n      if (loadNextDelay === false) {\n        if (computedProps.dataPromiseRef.current) {\n          computedProps.dataPromiseRef.current.then(function () {\n            if (!hasVerticalScrollbar()) {\n              computedProps.gotoNextPage({\n                append: true\n              });\n            }\n          });\n        }\n\n        return;\n      }\n\n      var delay = loadNextDelay === true ? computedProps.checkResizeDelay : loadNextDelay;\n\n      if (typeof delay == 'number') {\n        setTimeout(function () {\n          if (Array.isArray(computedPropsRef.current.dataSource)) {\n            return;\n          }\n\n          if (computedProps.dataPromiseRef.current) {\n            computedProps.dataPromiseRef.current.then(function () {\n              if (!hasVerticalScrollbar()) {\n                computedProps.gotoNextPage({\n                  append: true\n                });\n              }\n            });\n          }\n        }, delay);\n      }\n    }\n  };\n\n  (0, _react.useEffect)(function () {\n    if (!computedPropsRef.current.computedLivePagination) {\n      return;\n    }\n\n    if (!computedPropsRef.current.computedLoading) {\n      if (rafId.current) {\n        cancelAnimationFrame(rafId.current);\n        rafId.current = null;\n      }\n\n      rafId.current = requestAnimationFrame(function () {\n        var lastId = rafId.current = requestAnimationFrame(function () {\n          if (!computedPropsRef.current.computedLoading && rafId.current === lastId) {\n            loadNextPageWhileNoScrollbar();\n          }\n        });\n      });\n    }\n  });\n  return {};\n};\n\nvar _default = {\n  name: 'live-pagination',\n  hook: hook,\n  defaultProps: function defaultProps() {\n    return {};\n  }\n};\nexports.default = _default;"]},"metadata":{},"sourceType":"script"}