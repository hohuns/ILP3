{"ast":null,"code":"/**\n * Copyright Â© INOVUA TRADING.\n *\n * This source code is licensed under the Commercial License found in the\n * LICENSE file in the root directory of this source tree.\n */\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _typeof = require(\"@babel/runtime/helpers/typeof\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = exports.RowResizeIndicator = exports.RowResizeHandle = void 0;\nObject.defineProperty(exports, \"rowExpandColumnId\", {\n  enumerable: true,\n  get: function get() {\n    return _defaultRowIndexColumnId.id;\n  }\n});\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _dragHelper = _interopRequireDefault(require(\"@inovua/reactdatagrid-community/packages/drag-helper\"));\n\nvar _region = _interopRequireDefault(require(\"@inovua/reactdatagrid-community/packages/region\"));\n\nvar _join = _interopRequireDefault(require(\"@inovua/reactdatagrid-community/packages/join\"));\n\nvar _selectParent = _interopRequireDefault(require(\"@inovua/reactdatagrid-community/common/selectParent\"));\n\nvar _isMobile = _interopRequireDefault(require(\"@inovua/reactdatagrid-community/packages/isMobile\"));\n\nvar _context = _interopRequireDefault(require(\"@inovua/reactdatagrid-community/context\"));\n\nvar _defaultRowIndexColumnId = require(\"@inovua/reactdatagrid-community/normalizeColumns/defaultRowIndexColumnId\");\n\nvar _batchUpdate = _interopRequireDefault(require(\"@inovua/reactdatagrid-community/utils/batchUpdate\"));\n\nfunction _getRequireWildcardCache(nodeInterop) {\n  if (typeof WeakMap !== \"function\") return null;\n  var cacheBabelInterop = new WeakMap();\n  var cacheNodeInterop = new WeakMap();\n  return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) {\n    return nodeInterop ? cacheNodeInterop : cacheBabelInterop;\n  })(nodeInterop);\n}\n\nfunction _interopRequireWildcard(obj, nodeInterop) {\n  if (!nodeInterop && obj && obj.__esModule) {\n    return obj;\n  }\n\n  if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") {\n    return {\n      default: obj\n    };\n  }\n\n  var cache = _getRequireWildcardCache(nodeInterop);\n\n  if (cache && cache.has(obj)) {\n    return cache.get(obj);\n  }\n\n  var newObj = {};\n  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n\n  for (var key in obj) {\n    if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) {\n      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n\n      if (desc && (desc.get || desc.set)) {\n        Object.defineProperty(newObj, key, desc);\n      } else {\n        newObj[key] = obj[key];\n      }\n    }\n  }\n\n  newObj.default = obj;\n\n  if (cache) {\n    cache.set(obj, newObj);\n  }\n\n  return newObj;\n}\n\nvar stopPropagation = function stopPropagation(e) {\n  return e.stopPropagation();\n};\n\nvar useRowResize = function useRowResize(rowIndex, config) {\n  var computedProps = (0, _react.useContext)(_context.default);\n\n  if (rowIndex == null) {\n    rowIndex = computedProps.rowResizeIndexRef.current;\n  }\n\n  var setActive = function setActive(active) {\n    var queue = (0, _batchUpdate.default)();\n    queue.commit(function () {\n      if (config && config.setActive) {\n        config.setActive(active);\n      }\n\n      computedProps.rowResizeHandleRef.current.setHovered(false);\n      computedProps.rowResizeHandleRef.current.setActive(active);\n      computedProps.coverHandleRef.current.setActive(active);\n      computedProps.coverHandleRef.current.setCursor(active ? 'ns-resize' : '');\n    });\n  };\n\n  var setConstrained = function setConstrained(constrained) {\n    var queue = (0, _batchUpdate.default)();\n    queue.commit(function () {\n      if (config && config.setConstrained) {\n        config.setConstrained(constrained);\n      }\n\n      computedProps.rowResizeHandleRef.current.setConstrained(constrained);\n    });\n  };\n\n  var onResizeDragInit = function onResizeDragInit(_ref) {\n    var constrained = _ref.constrained,\n        offset = _ref.offset;\n    var queue = (0, _batchUpdate.default)();\n    queue.commit(function () {\n      setActive(true);\n      setConstrained(constrained);\n      computedProps.rowResizeIndexRef.current = rowIndex;\n      computedProps.rowResizeHandleRef.current.setOffset(offset);\n    });\n  };\n\n  var onResizeDrag = function onResizeDrag(_ref2) {\n    var constrained = _ref2.constrained,\n        offset = _ref2.offset;\n    var queue = (0, _batchUpdate.default)();\n    queue.commit(function () {\n      setConstrained(constrained);\n      computedProps.rowResizeHandleRef.current.setOffset(offset);\n    });\n  };\n\n  var onResizeDrop = function onResizeDrop(_ref3) {\n    var rowHeight = _ref3.rowHeight,\n        rowId = _ref3.rowId;\n    var queue = (0, _batchUpdate.default)();\n    queue.commit(function () {\n      setActive(false);\n      setConstrained(false);\n      computedProps.setRowHeightById(rowHeight, rowId);\n      computedProps.rowResizeIndexRef.current = null;\n    });\n  };\n\n  var onDoubleClick = function onDoubleClick() {\n    var rowId = computedProps.getItemId(config.data);\n    var defaultRowHeight = computedProps.rowHeight;\n    var currentRowHeight = computedProps.getRowHeightById(rowId);\n\n    if (currentRowHeight !== defaultRowHeight) {\n      var queue = (0, _batchUpdate.default)();\n      queue.commit(function () {\n        setActive(false);\n        setConstrained(false);\n        computedProps.setRowHeightById(null, rowId);\n      });\n    }\n  };\n\n  var onMouseDown = function onMouseDown(event) {\n    event.preventDefault();\n    var rowNode = (0, _selectParent.default)('.InovuaReactDataGrid__row', event.target);\n\n    if (!rowNode) {\n      rowNode = computedProps.getVirtualList().rows.filter(function (r) {\n        return r.props.index === rowIndex;\n      })[0];\n\n      if (rowNode) {\n        rowNode = rowNode.node;\n      }\n    }\n\n    var constrainTo = _region.default.from(computedProps.getDOMNode());\n\n    var rowRegion = _region.default.from(rowNode);\n\n    var rowId = computedProps.getItemId(config.data);\n    var initialPosition = rowRegion.bottom - constrainTo.top - 1;\n    var initialSize = computedProps.getRowHeightById(rowId);\n    var minRowHeight = computedProps.minRowHeight || 10;\n    var maxRowHeight = computedProps.maxRowHeight;\n    constrainTo.set({\n      top: rowRegion.top + minRowHeight\n    });\n\n    if (maxRowHeight) {\n      constrainTo.set({\n        bottom: rowRegion.top + maxRowHeight\n      });\n    }\n\n    var isContrained = function isContrained(dragRegion) {\n      var constrained = dragRegion.top <= constrainTo.top || dragRegion.bottom >= constrainTo.bottom;\n      return constrained;\n    };\n\n    rowRegion.set({\n      top: rowRegion.bottom\n    });\n    var dropped = false;\n    (0, _dragHelper.default)(event, {\n      constrainTo: constrainTo,\n      region: rowRegion,\n      onDragInit: function onDragInit(e, config) {\n        var constrained = isContrained(config.dragRegion);\n        setTimeout(function () {\n          if (dropped) {\n            return;\n          }\n\n          onResizeDragInit({\n            offset: initialPosition,\n            constrained: constrained\n          });\n        }, 150);\n      },\n      onDrag: function onDrag(e, config) {\n        e.preventDefault();\n        e.stopPropagation();\n        var diff = config.diff.top;\n        var offset = initialPosition + diff;\n        var constrained = isContrained(config.dragRegion);\n        e.preventDefault();\n        onResizeDrag({\n          constrained: constrained,\n          offset: offset\n        });\n      },\n      onDrop: function onDrop(e, config) {\n        dropped = true;\n        var diff = config.diff.top;\n        onResizeDrop({\n          rowHeight: initialSize + diff,\n          rowId: rowId\n        });\n      }\n    });\n  };\n\n  return {\n    onMouseDown: onMouseDown,\n    onDoubleClick: onDoubleClick\n  };\n};\n\nvar RowResizeIndicator = function RowResizeIndicator(_ref4) {\n  var handle = _ref4.handle,\n      height = _ref4.height,\n      column = _ref4.column;\n\n  var _useState = (0, _react.useState)(0),\n      _useState2 = (0, _slicedToArray2.default)(_useState, 2),\n      offset = _useState2[0],\n      setOffset = _useState2[1];\n\n  var _useState3 = (0, _react.useState)(false),\n      _useState4 = (0, _slicedToArray2.default)(_useState3, 2),\n      hovered = _useState4[0],\n      setHovered = _useState4[1];\n\n  var _useState5 = (0, _react.useState)(false),\n      _useState6 = (0, _slicedToArray2.default)(_useState5, 2),\n      active = _useState6[0],\n      setActive = _useState6[1];\n\n  var _useState7 = (0, _react.useState)(false),\n      _useState8 = (0, _slicedToArray2.default)(_useState7, 2),\n      constrained = _useState8[0],\n      setConstrained = _useState8[1];\n\n  var _useState9 = (0, _react.useState)(0),\n      _useState10 = (0, _slicedToArray2.default)(_useState9, 2),\n      initialWidth = _useState10[0],\n      setInitialWidth = _useState10[1];\n\n  (0, _react.useEffect)(function () {\n    handle({\n      setOffset: setOffset,\n      setActive: setActive,\n      setConstrained: setConstrained,\n      setHovered: setHovered,\n      setInitialWidth: setInitialWidth\n    });\n  }, []);\n\n  var _useRowResize = useRowResize(null),\n      onMouseDown = _useRowResize.onMouseDown,\n      onDoubleClick = _useRowResize.onDoubleClick;\n\n  var style = {\n    transform: \"translate3d(0px, \".concat(offset - Math.floor(height / 2) - 1, \"px, 0px)\"),\n    height: height,\n    left: column.computedOffset\n  };\n\n  if (hovered && !(active || constrained)) {\n    style.width = initialWidth || 20;\n  }\n\n  return _react.default.createElement(\"div\", {\n    style: style,\n    className: (0, _join.default)(\"InovuaReactDataGrid__row-resize-indicator\", active && \"InovuaReactDataGrid__row-resize-indicator--active\", hovered && \"InovuaReactDataGrid__row-resize-indicator--hovered\", _isMobile.default && \"InovuaReactDataGrid__row-resize-indicator--mobile\", constrained && \"InovuaReactDataGrid__row-resize-indicator--constrained\"),\n    onTouchStart: onMouseDown,\n    onClick: stopPropagation,\n    onDoubleClick: onDoubleClick\n  });\n};\n\nexports.RowResizeIndicator = RowResizeIndicator;\n\nvar RowResizeHandle = _react.default.memo(function (_ref5) {\n  var rowIndex = _ref5.rowIndex,\n      data = _ref5.data,\n      remoteRowIndex = _ref5.remoteRowIndex,\n      renderIndex = _ref5.renderIndex,\n      rowIndexInGroup = _ref5.rowIndexInGroup,\n      column = _ref5.column;\n  var computedProps = (0, _react.useContext)(_context.default);\n\n  var _useState11 = (0, _react.useState)(false),\n      _useState12 = (0, _slicedToArray2.default)(_useState11, 2),\n      active = _useState12[0],\n      doSetActive = _useState12[1];\n\n  var _useState13 = (0, _react.useState)(false),\n      _useState14 = (0, _slicedToArray2.default)(_useState13, 2),\n      constrained = _useState14[0],\n      doSetConstrained = _useState14[1];\n\n  var domRef = (0, _react.useRef)(null);\n\n  var _useRowResize2 = useRowResize(rowIndex, {\n    rowIndexInGroup: rowIndexInGroup,\n    data: data,\n    remoteRowIndex: remoteRowIndex,\n    setActive: doSetActive,\n    setConstrained: doSetConstrained\n  }),\n      onMouseDown = _useRowResize2.onMouseDown,\n      onDoubleClick = _useRowResize2.onDoubleClick;\n\n  var onMouseEnter = function onMouseEnter() {\n    if (!computedProps) {\n      return;\n    }\n\n    var queue = (0, _batchUpdate.default)();\n\n    var constrainTo = _region.default.from(computedProps.getDOMNode());\n\n    var handleRegion = _region.default.from(domRef.current);\n\n    var initialPosition = handleRegion.bottom - constrainTo.top;\n    queue.commit(function () {\n      computedProps.rowResizeHandleRef.current.setHovered(true);\n      computedProps.rowResizeHandleRef.current.setOffset(initialPosition);\n      computedProps.rowResizeHandleRef.current.setInitialWidth(column.computedWidth);\n    });\n  };\n\n  var onMouseLeave = function onMouseLeave() {\n    if (!computedProps) {\n      return;\n    }\n\n    computedProps.rowResizeHandleRef.current.setHovered(false);\n  };\n\n  var indexToRender = rowIndexInGroup != null ? rowIndexInGroup : remoteRowIndex;\n  return _react.default.createElement(_react.default.Fragment, null, renderIndex ? renderIndex(indexToRender) : indexToRender + 1, _react.default.createElement(\"div\", {\n    ref: domRef,\n    className: (0, _join.default)(\"InovuaReactDataGrid__row-resize-handle\", _isMobile.default && \"InovuaReactDataGrid__row-resize-handle--mobile\"),\n    style: {\n      width: column.computedWidth,\n      height: computedProps ? computedProps.rowResizeHandleWidth : 10\n    },\n    onMouseEnter: onMouseEnter,\n    onMouseLeave: onMouseLeave,\n    onMouseDown: onMouseDown,\n    onClick: stopPropagation,\n    onDoubleClick: onDoubleClick\n  }));\n});\n\nexports.RowResizeHandle = RowResizeHandle;\nvar _default = {\n  id: _defaultRowIndexColumnId.id,\n  rowIndexColumn: true,\n  rowResize: true,\n  cellSelectable: false,\n  autoLock: true,\n  headerAlign: 'center',\n  textAlign: 'center',\n  className: 'InovuaReactDataGrid__row-index-column',\n  render: function render(_ref6, _ref7) {\n    var remoteRowIndex = _ref6.remoteRowIndex,\n        data = _ref6.data,\n        rowIndex = _ref6.rowIndex,\n        rowIndexInGroup = _ref6.rowIndexInGroup;\n    var column = _ref7.column;\n    return _react.default.createElement(RowResizeHandle, {\n      data: data,\n      rowIndex: rowIndex,\n      rowIndexInGroup: rowIndexInGroup,\n      remoteRowIndex: remoteRowIndex,\n      renderIndex: column.renderIndex,\n      column: column\n    });\n  },\n  header: '',\n  showInContextMenu: false,\n  showColumnMenuSortOptions: false,\n  showColumnMenuGroupOptions: false,\n  showColumnMenuTool: false,\n  sortable: false,\n  editable: false,\n  draggable: false,\n  groupBy: false,\n  defaultWidth: 40,\n  minWidth: 40\n};\nexports.default = _default;","map":{"version":3,"sources":["/Users/sungjaejoo/Desktop/ILP-main/node_modules/@inovua/reactdatagrid-enterprise/plugins/row-index-column/defaultRowIndexColumn.js"],"names":["_interopRequireDefault","require","_typeof","Object","defineProperty","exports","value","default","RowResizeIndicator","RowResizeHandle","enumerable","get","_defaultRowIndexColumnId","id","_slicedToArray2","_react","_interopRequireWildcard","_dragHelper","_region","_join","_selectParent","_isMobile","_context","_batchUpdate","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","cache","has","newObj","hasPropertyDescriptor","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","stopPropagation","e","useRowResize","rowIndex","config","computedProps","useContext","rowResizeIndexRef","current","setActive","active","queue","commit","rowResizeHandleRef","setHovered","coverHandleRef","setCursor","setConstrained","constrained","onResizeDragInit","_ref","offset","setOffset","onResizeDrag","_ref2","onResizeDrop","_ref3","rowHeight","rowId","setRowHeightById","onDoubleClick","getItemId","data","defaultRowHeight","currentRowHeight","getRowHeightById","onMouseDown","event","preventDefault","rowNode","target","getVirtualList","rows","filter","r","props","index","node","constrainTo","from","getDOMNode","rowRegion","initialPosition","bottom","top","initialSize","minRowHeight","maxRowHeight","isContrained","dragRegion","dropped","region","onDragInit","setTimeout","onDrag","diff","onDrop","_ref4","handle","height","column","_useState","useState","_useState2","_useState3","_useState4","hovered","_useState5","_useState6","_useState7","_useState8","_useState9","_useState10","initialWidth","setInitialWidth","useEffect","_useRowResize","style","transform","concat","Math","floor","left","computedOffset","width","createElement","className","onTouchStart","onClick","memo","_ref5","remoteRowIndex","renderIndex","rowIndexInGroup","_useState11","_useState12","doSetActive","_useState13","_useState14","doSetConstrained","domRef","useRef","_useRowResize2","onMouseEnter","handleRegion","computedWidth","onMouseLeave","indexToRender","Fragment","ref","rowResizeHandleWidth","_default","rowIndexColumn","rowResize","cellSelectable","autoLock","headerAlign","textAlign","render","_ref6","_ref7","header","showInContextMenu","showColumnMenuSortOptions","showColumnMenuGroupOptions","showColumnMenuTool","sortable","editable","draggable","groupBy","defaultWidth","minWidth"],"mappings":"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","sourcesContent":["/**\n * Copyright Â© INOVUA TRADING.\n *\n * This source code is licensed under the Commercial License found in the\n * LICENSE file in the root directory of this source tree.\n */\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _typeof = require(\"@babel/runtime/helpers/typeof\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = exports.RowResizeIndicator = exports.RowResizeHandle = void 0;\nObject.defineProperty(exports, \"rowExpandColumnId\", {\n  enumerable: true,\n  get: function get() {\n    return _defaultRowIndexColumnId.id;\n  }\n});\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _dragHelper = _interopRequireDefault(require(\"@inovua/reactdatagrid-community/packages/drag-helper\"));\n\nvar _region = _interopRequireDefault(require(\"@inovua/reactdatagrid-community/packages/region\"));\n\nvar _join = _interopRequireDefault(require(\"@inovua/reactdatagrid-community/packages/join\"));\n\nvar _selectParent = _interopRequireDefault(require(\"@inovua/reactdatagrid-community/common/selectParent\"));\n\nvar _isMobile = _interopRequireDefault(require(\"@inovua/reactdatagrid-community/packages/isMobile\"));\n\nvar _context = _interopRequireDefault(require(\"@inovua/reactdatagrid-community/context\"));\n\nvar _defaultRowIndexColumnId = require(\"@inovua/reactdatagrid-community/normalizeColumns/defaultRowIndexColumnId\");\n\nvar _batchUpdate = _interopRequireDefault(require(\"@inovua/reactdatagrid-community/utils/batchUpdate\"));\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nvar stopPropagation = function stopPropagation(e) {\n  return e.stopPropagation();\n};\n\nvar useRowResize = function useRowResize(rowIndex, config) {\n  var computedProps = (0, _react.useContext)(_context.default);\n\n  if (rowIndex == null) {\n    rowIndex = computedProps.rowResizeIndexRef.current;\n  }\n\n  var setActive = function setActive(active) {\n    var queue = (0, _batchUpdate.default)();\n    queue.commit(function () {\n      if (config && config.setActive) {\n        config.setActive(active);\n      }\n\n      computedProps.rowResizeHandleRef.current.setHovered(false);\n      computedProps.rowResizeHandleRef.current.setActive(active);\n      computedProps.coverHandleRef.current.setActive(active);\n      computedProps.coverHandleRef.current.setCursor(active ? 'ns-resize' : '');\n    });\n  };\n\n  var setConstrained = function setConstrained(constrained) {\n    var queue = (0, _batchUpdate.default)();\n    queue.commit(function () {\n      if (config && config.setConstrained) {\n        config.setConstrained(constrained);\n      }\n\n      computedProps.rowResizeHandleRef.current.setConstrained(constrained);\n    });\n  };\n\n  var onResizeDragInit = function onResizeDragInit(_ref) {\n    var constrained = _ref.constrained,\n        offset = _ref.offset;\n    var queue = (0, _batchUpdate.default)();\n    queue.commit(function () {\n      setActive(true);\n      setConstrained(constrained);\n      computedProps.rowResizeIndexRef.current = rowIndex;\n      computedProps.rowResizeHandleRef.current.setOffset(offset);\n    });\n  };\n\n  var onResizeDrag = function onResizeDrag(_ref2) {\n    var constrained = _ref2.constrained,\n        offset = _ref2.offset;\n    var queue = (0, _batchUpdate.default)();\n    queue.commit(function () {\n      setConstrained(constrained);\n      computedProps.rowResizeHandleRef.current.setOffset(offset);\n    });\n  };\n\n  var onResizeDrop = function onResizeDrop(_ref3) {\n    var rowHeight = _ref3.rowHeight,\n        rowId = _ref3.rowId;\n    var queue = (0, _batchUpdate.default)();\n    queue.commit(function () {\n      setActive(false);\n      setConstrained(false);\n      computedProps.setRowHeightById(rowHeight, rowId);\n      computedProps.rowResizeIndexRef.current = null;\n    });\n  };\n\n  var onDoubleClick = function onDoubleClick() {\n    var rowId = computedProps.getItemId(config.data);\n    var defaultRowHeight = computedProps.rowHeight;\n    var currentRowHeight = computedProps.getRowHeightById(rowId);\n\n    if (currentRowHeight !== defaultRowHeight) {\n      var queue = (0, _batchUpdate.default)();\n      queue.commit(function () {\n        setActive(false);\n        setConstrained(false);\n        computedProps.setRowHeightById(null, rowId);\n      });\n    }\n  };\n\n  var onMouseDown = function onMouseDown(event) {\n    event.preventDefault();\n    var rowNode = (0, _selectParent.default)('.InovuaReactDataGrid__row', event.target);\n\n    if (!rowNode) {\n      rowNode = computedProps.getVirtualList().rows.filter(function (r) {\n        return r.props.index === rowIndex;\n      })[0];\n\n      if (rowNode) {\n        rowNode = rowNode.node;\n      }\n    }\n\n    var constrainTo = _region.default.from(computedProps.getDOMNode());\n\n    var rowRegion = _region.default.from(rowNode);\n\n    var rowId = computedProps.getItemId(config.data);\n    var initialPosition = rowRegion.bottom - constrainTo.top - 1;\n    var initialSize = computedProps.getRowHeightById(rowId);\n    var minRowHeight = computedProps.minRowHeight || 10;\n    var maxRowHeight = computedProps.maxRowHeight;\n    constrainTo.set({\n      top: rowRegion.top + minRowHeight\n    });\n\n    if (maxRowHeight) {\n      constrainTo.set({\n        bottom: rowRegion.top + maxRowHeight\n      });\n    }\n\n    var isContrained = function isContrained(dragRegion) {\n      var constrained = dragRegion.top <= constrainTo.top || dragRegion.bottom >= constrainTo.bottom;\n      return constrained;\n    };\n\n    rowRegion.set({\n      top: rowRegion.bottom\n    });\n    var dropped = false;\n    (0, _dragHelper.default)(event, {\n      constrainTo: constrainTo,\n      region: rowRegion,\n      onDragInit: function onDragInit(e, config) {\n        var constrained = isContrained(config.dragRegion);\n        setTimeout(function () {\n          if (dropped) {\n            return;\n          }\n\n          onResizeDragInit({\n            offset: initialPosition,\n            constrained: constrained\n          });\n        }, 150);\n      },\n      onDrag: function onDrag(e, config) {\n        e.preventDefault();\n        e.stopPropagation();\n        var diff = config.diff.top;\n        var offset = initialPosition + diff;\n        var constrained = isContrained(config.dragRegion);\n        e.preventDefault();\n        onResizeDrag({\n          constrained: constrained,\n          offset: offset\n        });\n      },\n      onDrop: function onDrop(e, config) {\n        dropped = true;\n        var diff = config.diff.top;\n        onResizeDrop({\n          rowHeight: initialSize + diff,\n          rowId: rowId\n        });\n      }\n    });\n  };\n\n  return {\n    onMouseDown: onMouseDown,\n    onDoubleClick: onDoubleClick\n  };\n};\n\nvar RowResizeIndicator = function RowResizeIndicator(_ref4) {\n  var handle = _ref4.handle,\n      height = _ref4.height,\n      column = _ref4.column;\n\n  var _useState = (0, _react.useState)(0),\n      _useState2 = (0, _slicedToArray2.default)(_useState, 2),\n      offset = _useState2[0],\n      setOffset = _useState2[1];\n\n  var _useState3 = (0, _react.useState)(false),\n      _useState4 = (0, _slicedToArray2.default)(_useState3, 2),\n      hovered = _useState4[0],\n      setHovered = _useState4[1];\n\n  var _useState5 = (0, _react.useState)(false),\n      _useState6 = (0, _slicedToArray2.default)(_useState5, 2),\n      active = _useState6[0],\n      setActive = _useState6[1];\n\n  var _useState7 = (0, _react.useState)(false),\n      _useState8 = (0, _slicedToArray2.default)(_useState7, 2),\n      constrained = _useState8[0],\n      setConstrained = _useState8[1];\n\n  var _useState9 = (0, _react.useState)(0),\n      _useState10 = (0, _slicedToArray2.default)(_useState9, 2),\n      initialWidth = _useState10[0],\n      setInitialWidth = _useState10[1];\n\n  (0, _react.useEffect)(function () {\n    handle({\n      setOffset: setOffset,\n      setActive: setActive,\n      setConstrained: setConstrained,\n      setHovered: setHovered,\n      setInitialWidth: setInitialWidth\n    });\n  }, []);\n\n  var _useRowResize = useRowResize(null),\n      onMouseDown = _useRowResize.onMouseDown,\n      onDoubleClick = _useRowResize.onDoubleClick;\n\n  var style = {\n    transform: \"translate3d(0px, \".concat(offset - Math.floor(height / 2) - 1, \"px, 0px)\"),\n    height: height,\n    left: column.computedOffset\n  };\n\n  if (hovered && !(active || constrained)) {\n    style.width = initialWidth || 20;\n  }\n\n  return _react.default.createElement(\"div\", {\n    style: style,\n    className: (0, _join.default)(\"InovuaReactDataGrid__row-resize-indicator\", active && \"InovuaReactDataGrid__row-resize-indicator--active\", hovered && \"InovuaReactDataGrid__row-resize-indicator--hovered\", _isMobile.default && \"InovuaReactDataGrid__row-resize-indicator--mobile\", constrained && \"InovuaReactDataGrid__row-resize-indicator--constrained\"),\n    onTouchStart: onMouseDown,\n    onClick: stopPropagation,\n    onDoubleClick: onDoubleClick\n  });\n};\n\nexports.RowResizeIndicator = RowResizeIndicator;\n\nvar RowResizeHandle = _react.default.memo(function (_ref5) {\n  var rowIndex = _ref5.rowIndex,\n      data = _ref5.data,\n      remoteRowIndex = _ref5.remoteRowIndex,\n      renderIndex = _ref5.renderIndex,\n      rowIndexInGroup = _ref5.rowIndexInGroup,\n      column = _ref5.column;\n  var computedProps = (0, _react.useContext)(_context.default);\n\n  var _useState11 = (0, _react.useState)(false),\n      _useState12 = (0, _slicedToArray2.default)(_useState11, 2),\n      active = _useState12[0],\n      doSetActive = _useState12[1];\n\n  var _useState13 = (0, _react.useState)(false),\n      _useState14 = (0, _slicedToArray2.default)(_useState13, 2),\n      constrained = _useState14[0],\n      doSetConstrained = _useState14[1];\n\n  var domRef = (0, _react.useRef)(null);\n\n  var _useRowResize2 = useRowResize(rowIndex, {\n    rowIndexInGroup: rowIndexInGroup,\n    data: data,\n    remoteRowIndex: remoteRowIndex,\n    setActive: doSetActive,\n    setConstrained: doSetConstrained\n  }),\n      onMouseDown = _useRowResize2.onMouseDown,\n      onDoubleClick = _useRowResize2.onDoubleClick;\n\n  var onMouseEnter = function onMouseEnter() {\n    if (!computedProps) {\n      return;\n    }\n\n    var queue = (0, _batchUpdate.default)();\n\n    var constrainTo = _region.default.from(computedProps.getDOMNode());\n\n    var handleRegion = _region.default.from(domRef.current);\n\n    var initialPosition = handleRegion.bottom - constrainTo.top;\n    queue.commit(function () {\n      computedProps.rowResizeHandleRef.current.setHovered(true);\n      computedProps.rowResizeHandleRef.current.setOffset(initialPosition);\n      computedProps.rowResizeHandleRef.current.setInitialWidth(column.computedWidth);\n    });\n  };\n\n  var onMouseLeave = function onMouseLeave() {\n    if (!computedProps) {\n      return;\n    }\n\n    computedProps.rowResizeHandleRef.current.setHovered(false);\n  };\n\n  var indexToRender = rowIndexInGroup != null ? rowIndexInGroup : remoteRowIndex;\n  return _react.default.createElement(_react.default.Fragment, null, renderIndex ? renderIndex(indexToRender) : indexToRender + 1, _react.default.createElement(\"div\", {\n    ref: domRef,\n    className: (0, _join.default)(\"InovuaReactDataGrid__row-resize-handle\", _isMobile.default && \"InovuaReactDataGrid__row-resize-handle--mobile\"),\n    style: {\n      width: column.computedWidth,\n      height: computedProps ? computedProps.rowResizeHandleWidth : 10\n    },\n    onMouseEnter: onMouseEnter,\n    onMouseLeave: onMouseLeave,\n    onMouseDown: onMouseDown,\n    onClick: stopPropagation,\n    onDoubleClick: onDoubleClick\n  }));\n});\n\nexports.RowResizeHandle = RowResizeHandle;\nvar _default = {\n  id: _defaultRowIndexColumnId.id,\n  rowIndexColumn: true,\n  rowResize: true,\n  cellSelectable: false,\n  autoLock: true,\n  headerAlign: 'center',\n  textAlign: 'center',\n  className: 'InovuaReactDataGrid__row-index-column',\n  render: function render(_ref6, _ref7) {\n    var remoteRowIndex = _ref6.remoteRowIndex,\n        data = _ref6.data,\n        rowIndex = _ref6.rowIndex,\n        rowIndexInGroup = _ref6.rowIndexInGroup;\n    var column = _ref7.column;\n    return _react.default.createElement(RowResizeHandle, {\n      data: data,\n      rowIndex: rowIndex,\n      rowIndexInGroup: rowIndexInGroup,\n      remoteRowIndex: remoteRowIndex,\n      renderIndex: column.renderIndex,\n      column: column\n    });\n  },\n  header: '',\n  showInContextMenu: false,\n  showColumnMenuSortOptions: false,\n  showColumnMenuGroupOptions: false,\n  showColumnMenuTool: false,\n  sortable: false,\n  editable: false,\n  draggable: false,\n  groupBy: false,\n  defaultWidth: 40,\n  minWidth: 40\n};\nexports.default = _default;"]},"metadata":{},"sourceType":"script"}